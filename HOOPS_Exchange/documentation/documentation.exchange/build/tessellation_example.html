<!doctype html>
<html lang="en-US">
<head>
    <link rel="stylesheet" href="../common/doxygen.css">
	<link rel="stylesheet" href="../common/style.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
	<script src="dynsections.js"></script>
	<script src="../common/sidebar.js"></script>
    <title>HOOPS Exchange Documentation</title>
    <link rel="shortcut icon" href="../common/favicon.ico">
</head>
<body>
<div class="header-background">
	<div class="header-margins">
        <div style="float: left;"><img src="../product/images/logo.png"></div>
        <div style="margin-left: 520px; margin-right: 20px;">
            <div class="search" id="Search"> 
                <form method="get" action="http://developer.techsoft3d.com/cgi/swish-hoops-exchange.cgi" enctype="application/x-www-form-urlencoded" class="form">
                    <label style='color: gray;'>Search: </label>
                    <input maxlength="200" value="" size="20" name="query" type="text">
                </form>
            </div>
        </div>
    </div>
</div>
<div class="cdiv">
<div class="content-body">
<div class="content-internalframe"><!-- Generated by Doxygen 1.8.7 -->
</div><!-- top -->
<div class="contents">
<div class="textblock"><p> 
</div></div>
</p>
<h2>4.3 Tessellation Example</h2>
<h3>Creating a tessellation entity for representing facetted objects</h3>
<p>This section explains how to add tessellation base data to an existing representation item for a theoretical STL file. The process is broken into two main parts: creating the root base data, and creating the tessellation facet data.</p>
<h3>Create the tessellation base data</h3>
<ol>
<li>
<p class="startli">Create a <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html">A3DTessBaseData</a></span> structure and set its member values to represent the facets. The following explanation assumes facets are defined as triangles, although you could define facets having more than three points.</p>
<ul class="square">
<li>
<p class="startli"><span class="code"><b>m_uiCoordSize</b></span>. Set this member to the number of coordinates required to represent all facets in the object. This value is calculated as <span class="code">9 * facetSize</span>. The 9 multiplier is the number of points in each facet (3) times the number of coordinates in each point (3). The <span class="code">facetSize</span> variable represents the number of facets in the object.</p>
<p class="endli"></p>
</li>
<li>
<span class="code"><b>m_pdCoords</b></span>. Set this member to an array of N <span class="code">A3DDouble</span> entries, where N is the value calculated for the <span class="code">m_uiCoordSize</span> member. </li>
</ul>
<p class="endli"></p>
</li>
<li style="margin-top: 10px;">
<p class="startli">Add coordinates for each vertex of each facet to the array referenced by the <span class="code">m_pdCoords</span> member. The X, Y, and Z coordinates for each vertex are represented as sequential entries in the array, as shown in this example:</p>
<div class="fragment"><div class="line">sTessBaseData.m_pdCoords[j++] = x;</div>
<div class="line">sTessBaseData.m_pdCoords[j++] = y;</div>
<div class="line">sTessBaseData.m_pdCoords[j++] = z;</div>
</div><!-- fragment -->  </li>
</ol>
<h3>Create the tessellation facet data</h3>
<ol>
<li>
<p class="startli">Create an <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a></span> structure and set its members to represent the facet normals: </p><ul class="square">
<li>
<p class="startli"><span class="code"><b>m_uiNormalSize</b></span>. Set this member to the size of the array required to represent the normals for all facets in the objects. This is calculated as <span class="code">3 * facetSize</span>. The 3 multiplier is the number of coordinates to represent each vector.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="code"><b>m_pdNormals</b></span>. Set this member to an array of N <span class="code">A3DDouble</span> entries, where N is the value calculated for the <span class="code">m_uiNormalSize</span> member.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><span class="code"><b>m_uiTriangulatedIndexSize</b></span>. Set this member to the number of entries required to represent the indices associated with each facet in the objects. Each facet can have one to four indices that reference texture coordinates, one index that references a facet normal, and three indices that reference vertices. Normals are read from the <span class="code">m_pdNormals</span> array, and textures are read from the <span class="code">m_pdTextureCoords</span> array.</p>
<p class="endli"></p>
</li>
<li>
<span class="code"><b>m_puiTriangulatedindices</b></span>. Set this member to an array of N <span class="code">A3DUns32</span> entries, where N is the number of entries in the <span class="code">m_uiTriangulatedIndexSize</span> member. This array contains the indices of the points (<span class="code">m_pdCoords</span>), normals (<span class="code">m_pdNormals</span>), and texture arrays for each face's triangulated representation. The entries in this array correspond to the contents in the <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html">A3DTessFaceData</a></span> entity. </li>
</ul>
<p class="endli"></p>
</li>
<li style="margin-top: 10px;">
<p class="startli">Add the indices for each facet, considering the number of entries to represent each facet. Each facet contains the following sequential representations in this array: </p><ul class="square">
<li>
<p class="startli">(Optional) Index of the first texture in the array referenced by the <span class="code">m_pdTextureCoords</span> member. This entry can be followed by three more entries for additional texture indices.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Index of the facet normal in the array referenced by the <span class="code">m_pdNormals</span> member.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Index of the first facet vertex in the array referenced by the <span class="code">m_pdCoords</span> member.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Index of the second facet vertex in the array referenced by the <span class="code">m_pdCoords</span> member.</p>
<p class="endli"></p>
</li>
<li>
Index of the third facet vertex in the array referenced by the <span class="code">m_pdCoords</span> member. </li>
</ul>
<p> 
        <p>In the following example for STL data, <span class=code>facetSize</span> is set to 0 for the first facet represented by the array and to 1 for the second facet in the array.</p>
</p>
<div class="fragment"><div class="line">sTess3DData.m_puiTriangulatedindices[4 * facetSize] = i;</div>
<div class="line">sTess3DData.m_puiTriangulatedindices[4 * facetSize + 1] = j;</div>
<div class="line">sTess3DData.m_puiTriangulatedindices[4 * facetSize+2] = j + 3;</div>
<div class="line">sTess3DData.m_puiTriangulatedindices[4 * facetSize+3] = j + 6;</div>
</div><!-- fragment --><p> 
    <li>Add the coordinates of each facet normal to the array referenced by the <span class='code'>m_pdNormals</span> member. The X, Y, and Z coordinates for each vector are represented in sequential entries in the array, as shown in this example:
</p>
<div class="fragment"><div class="line">sTess3DData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a256513a15225c049a140c7b0e7bcc30b">m_pdNormals</a>[i++] = x;</div>
<div class="line">sTess3DData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a256513a15225c049a140c7b0e7bcc30b">m_pdNormals</a>[i++] = y;</div>
<div class="line">sTess3DData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a256513a15225c049a140c7b0e7bcc30b">m_pdNormals</a>[i++] = z;</div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
<p class="startli">For each face, create an <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html">A3DTessFaceData</a></span> entity and set its member values as follows: </p><ul class="square">
<li>
<p class="startli"><b>m_usUsedEntitiesFlags</b>. Set this member to an enumeration that specifies the entities used in the current face tessellation. For example, the <span class="code">kA3DTessFaceDataTriangleOneNormal</span> enumeration specifies that the face data is a triangle with a single normal facet.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>m_uiSizesTriangulatedSize</b>. Set this member to the number of entries in the array referenced by the <span class="code">m_puiSizesTriangulated</span> member.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>m_puiSizesTriangulated</b>. Set this value to the repetition sequence applied to the <span class="code">m_usUsedEntitiesFlags</span> member. A single entry with a value of 1 indicates that the first flag in <span class="code">m_usUsedEntitiesFlags</span> applies to all face data.</p>
<p class="endli"></p>
</li>
<li>
<b>m_uiStartTriangulated</b>. Set this value to the starting index for the wire in the array of point indices of the <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a></span> entity. </li>
</ul>
<p class="endli"></p>
</li>
<li style="margin-top: 10px;">
<p class="startli">Set the <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a></span> structure's <span class="code">m_psFaceTessData</span> member to reference an array that in turn references each face that applied to the facets. Set the <span class="code">m_uiFaceTessSize</span> member to the number of faces in this array.</p>
<p class="endli"></p>
</li>
<li style="margin-top: 10px;">
<p class="startli">Create the tessellation entity by invoking the <span class="code">A3DTess3DCreate</span> function, providing the location of the <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a></span> structure as the first argument and the location of the <span class="code">A3DTess3D</span> pointer as the second argument.</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tessellation__types.html#ga9670f8565eae07a43dfd760375521ee6">A3DTess3D</a>* pTess3D = NULL;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tess3d.html#gad36330b76b03a1e089272e184b7fc668">A3DTess3DCreate</a>(&amp;sTess3DData, &amp;pTess3D);</div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
<p class="startli">Package the tessellation base data with in the <span class="code">A3DTess3D</span> entity by invoking the <span class="code">A3DTessBaseSet</span> function.</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tessellation__base.html#gaa3158e0d04751fa86f5675b80a2c51dc">A3DTessBaseSet</a>(&amp;pTess3D, &amp;sTessBaseData);</div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
Add the <span class="code">A3DTess3D</span> data to a representation item. </li>
</ol>
<p>The complete code sample can be found <a href="samples/create_tess_entity.c">here</a>. The code creates an A3D tessellation entity from a file that conforms to the STL format. It packages this entity with a poly B-rep model representation item. STL is a file format native to the stereolithography CAD software created by 3D Systems.</p>
</div></div><!-- contents -->

    <div id="accordion" class="sidebar">
		<p class="accordion-toggle">Overview</p>
			<div class="accordion-content overview">
				<ul>
					<li><a href="technical_overview.html">Technical&nbsp;Overview</a></li>
					<li><a href="getting_started.html">Getting&nbsp;Started</a></li>
					<li><a href="distributing_your_application.html">Distributing Platforms</a></li>
					<li><a href="supported_platforms.html">Supported Platforms</a></li>
					<li><a href="overview.html">File Formats</a></li>
					<li><a href="release_notes.html">Release&nbsp;Notes</a></li>
					<li><a href="samples.html">Sample Code</a></li>
					<li><a href="acknowledgments.html">Acknowledgments</a></li>
					<li><a href="http://developer.techsoft3d.com/developer-support/" target="_blank">Contact Support</a></li>
				</ul>
			</div>
		<p class="accordion-toggle">Programming Guide</p>
			<div class="accordion-content default">
				<div class="indent">
					<p class="accordion-toggle">1 Introduction</p>
					<ul>
						<li><a href="introduction.html">1.0 Introduction</a></li>
						<li><a href="initialize_exchange.html">1.1 Initializing HOOPS Exchange</a></li>
						<li><a href="api_conventions.html">1.2 API Conventions</a></li>
					</ul>
					<p class="accordion-toggle">2 Basic Operations</p>
					<ul>
						<li><a href="load_model.html">2.1 Simple Model Load and Export</a></li>
						<li><a href="prc.html">2.2 PRC Basics</a></li>
						<li><a href="building_prc.html">2.3 Building PRC</a></li>
					</ul>
					<p class="accordion-toggle">3 Entities</p>
					<ul>
						<li><a href="product_occurrence.html">3.0 Product Occurrences</a></li>
						<li><a href="product_occurrence.html#partDefinitions">3.1 Part Definitions</a></li>
						<li><a href="product_occurrence.html#prototypes">3.2 Prototypes</a></li>
						<li><a href="product_occurrence.html#externals">3.3 Externals</a></li>
						<li><a href="product_occurrence.html#displayParameters">3.4 Display Parameters</a></li>
						<li><a href="product_occurrence.html#filtersLayers">3.5 Filters and Layers</a></li>
						<li><a href="product_occurrence.html#configurations">3.6 Configurations</a></li>
						<li><a href="persistent_ids.html">3.7 Persistent IDs</a></li>
					</ul>
                    <p class="accordion-toggle">4 Geometry</p>
					<ul>
						<li><a href="reading_geometry.html">4.0 Reading Model Geometry</a></li>
						<li><a href="getting_tessellation.html">4.1 Getting Tessellation</a></li>
						<li><a href="getting_brep.html">4.2 Getting B-rep Data</a></li>
						<li><a href="tessellation_example.html">4.3 Tessellation Example</a></li>
						<li><a href="approx_as_analytic.html">4.4 Display Parameters</a></li>
					</ul>
                    <p class="accordion-toggle">5 Entity Attributes</p>
					<ul>
						<li><a href="colors_materials.html">5.1 Colors and Materials</a></li>
						<li><a href="managing_attribute_inheritance.html">5.2 Managing Attribute Inheritance</a></li>
						<li><a href="transformations.html">5.3 Transformations</a></li>
					</ul>
                    <p><a href="markup.html">6 Markup and Views</a></p>
                    <p class="accordion-toggle">7 Advanced Functions</p>
					<ul>
						<li><a href="advanced.html#computingLengths">7.1 Computing Lengths</a></li>
						<li><a href="advanced.html#physicalProperties">7.2 Getting Physical Properties</a></li>
						<li><a href="advanced.html#modelCompare">7.3 Model Compare</a></li>
						<li><a href="advanced.html#modelSewing">7.4 Model Sewing</a></li>
						<li><a href="advanced.html#computingSections">7.5 Computing Sections</a></li>
						<li><a href="advanced.html#comparingPointClouds">7.6 Model to Point Cloud Comparison</a></li>
						<li><a href="advanced.html#shattered">7.7 Shattered Loading</a></li>
					</ul>
                    <p><a href="hoops_exchange_for_parasolid_developers.html">8 HOOPS Exchange for Parasolid Developers</a></p>
				</div>
			</div>
		<p class="accordion-toggle">API Reference</p>
			<div class="accordion-content api_ref">
				<ul>
					<li><a href="classes.html">Data Structures</a></li>
					<li><a href="f_index.html">Functions</a></li>
					<li><a href="modules.html">Modules</a></li>
					<li><a href="files.html">Files</a></li>
					<li><a href="functions.html">Fields</a></li>
					<li><a href="globals.html">Globals</a></li>
				</ul>
			</div>
    </div>
<div class="footer">
	HOOPS Exchange 2016 SP1 U4&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.techsoft3d.com">www.techsoft3d.com</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://developer.techsoft3d.com">developer.techsoft3d.com</a>
</div>
</body>
</html>