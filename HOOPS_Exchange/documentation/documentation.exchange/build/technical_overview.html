<!doctype html>
<html lang="en-US">
<head>
    <link rel="stylesheet" href="../common/doxygen.css">
	<link rel="stylesheet" href="../common/style.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
	<script src="dynsections.js"></script>
	<script src="../common/sidebar.js"></script>
    <title>HOOPS Exchange Documentation</title>
    <link rel="shortcut icon" href="../common/favicon.ico">
</head>
<body>
<div class="header-background">
	<div class="header-margins">
        <div style="float: left;"><img src="../product/images/logo.png"></div>
        <div style="margin-left: 520px; margin-right: 20px;">
            <div class="search" id="Search"> 
                <form method="get" action="http://developer.techsoft3d.com/cgi/swish-hoops-exchange.cgi" enctype="application/x-www-form-urlencoded" class="form">
                    <label style='color: gray;'>Search: </label>
                    <input maxlength="200" value="" size="20" name="query" type="text">
                </form>
            </div>
        </div>
    </div>
</div>
<div class="cdiv">
<div class="content-body">
<div class="content-internalframe"><!-- Generated by Doxygen 1.8.7 -->
</div><!-- top -->
<div class="contents">
<div class="textblock"><p> 
</div></div>

<h1>HOOPS Exchange Technical Overview</h1>

<p>This page is aimed at developers of 3D engineering applications who wish to decide whether the HOOPS Exchange data translation SDK is suitable for further investigation or technical evaluation. It describes the features and benefits of the HOOPS Exchange libraries and focuses on areas where HOOPS Exchange has particularly unique features. Many features and functions of HOOPS Exchange are mentioned briefly or are omitted altogether. A more detailed description can be found in the HOOPS Exchange <a href="introduction.html">Programming Guide</a>.</p>

<h2>What is HOOPS Exchange?</h2>
<p>HOOPS Exchange is a set of high performance software libraries designed to provide software developers with the ability to read and write popular 3D formats from within their application. Exchange reads CAD data from the most popular 3D file formats and converts that 3D data to the PRC data format, a highly compressed and open file format that is currently submitted for ISO standardization. PRC is also one of the container formats used for 3D in Adobe PDF.</p>

<p>HOOPS Exchange is optimized to read various kinds of 3D data, especially those coming from computer-aided design (CAD) systems. Most of the data types stored by CAD systems are supported by Exchange:</p>

<ul>
    <li>Assemblies and parts</li>
    <li>Trees of 3D entities (coordinate systems, wireframes, surfaces, and solids)</li>
    <li>Exact geometry representation for curves and surfaces</li>
    <li>Topological structures for surface and solid models</li>
    <li>Tessellated (triangulated) representation</li>
    <li>Markup data including Product and Manufacturing Information (PMI)</li>
    <li>Metadata such as name, color, layer and other non-geometric data</li>
</ul>

<p>HOOPS Exchange also provides the capability to write PRC data to file. This PRC data file can then be inserted into a 3D PDF file. 3D PDF is currently used in 3D documentation workflows for several large industries, including aerospace, automotive, architecture and construction. The manufacturing industry has come to rely on PDF for the exchange of manufacturing documentation, distribution of service and parts manuals, and capture and submission of regulatory documentation.</p>

<p>Evaluators of HOOPS Exchange are usually interested in two main areas:</p>

<ul>
    <li>Suitability of the product for CAD data exchange - import, translation and export. This includes coverage of file formats, coverage of data types within each file format e.g. attributes, PMI, configurations etc., quality of data import, performance and memory usage.</li>
    <li>Suitability of the API interface for integration within the host application or product suite. This includes both ease of integration and functional coverage.</li>
</ul>

<p>Both areas can be investigated via the HOOPS Exchange API. However some evaluators may find it quicker and easier to start their evaluation by testing performance, memory usage and quality of translation through the two end-user demonstration products Tech Soft 3D provides for this purpose.</p>



<h2>Typical Uses for HOOPS Exchange</h2>

<p>HOOPS Exchange is a general toolkit for the reading and writing of both proprietary and open CAD data formats. Users of HOOPS Exchange may be working in a variety of different markets, from traditional mechanical design, engineering and manufacturing e.g. automotive and aerospace, through to markets in which mechanical data is used but is not seen as core to the activity of that market e.g. construction, plant design, shipbuilding and energy.</p>

<p>The list of use cases below is neither market-specific nor comprehensive. It focuses on the type of data and workflow that is most useful for a particular use-case. The list is provided to help the reader identify which use-case is most applicable to their needs in order to further aid understanding of HOOPS Exchange concepts.</p>

<p>The four use cases considered are:</p>

<ul>
    <li><a href="#visualization">Visualization</a></li>
    <li><a href="#modeling">Modeling</a></li>
    <li><a href="#archiving">Archiving</a></li>
    <li><a href="#pdf_publishing">PDF Publishing</a></li>
</ul>

<a name="visualization"></a>
<h3>Visualization</h3>

<p>Visualization users are typically interested in the tessellated representation of the geometry. Topological connectivity and accurate surface definitions may not be required but markup data, graphical and non-graphical attributes are likely to be important.</p>

<p>Typical uses for visualization data can include product catalogs, work instruction creation, re-meshing for finite element analysis and computational fluid dynamics and inclusion in large assemblies for design review and clash detection e.g. building, ship and plant models.</p>

<p>While many systems can perform modeling operations on tessellated data, for the purposes of this document these are considered visualization users as they are primarily interested in tessellated data.</p>

<a name="modeling"></a>
<h3>Modeling</h3>

<p>Modeling includes surface and solid-modelers, along with hybrid surface and solid modelers. In this case the B-rep topology and accurate surface information is important.</p>

<p>Tech Soft 3D has much experience integrating HOOPS Exchange with the commonly used solid modeling kernels, Parasolid from Siemens and ACIS from Dassault Systemes, and can provide consulting services for this purpose. If you are interested in integrating HOOPS Exchange with one of these kernels, please contact your Tech Soft 3D account manager.</p>

<p>Typical users of HOOPS Exchange for modeling include many manufacturing applications that exist downstream of mechanical design e.g. Computer-Aided Manufacturing/Machining (CAM), Computer-Aided Engineering (CAE/CFD/FEA) and Coordinated Measurement Machine (CMM) planning software.</p>

<a name="archiving"></a>
<h3>Archiving</h3>

<p>Data archiving represents the requirement to preserve and protect an organization’s intellectual property in terms of accurate 3D model data. HOOPS Exchange offers the unique capability to store the original modeler-specific surface data in an open format that is aiming for ISO certification. This allows large manufacturing companies and PLM systems vendors to ensure digital assets are protected for the long-term and can be made available at the original accuracy for future users.</p>

<p>Again, the B-rep topology and accurate surface information is important, although many such systems will primarily use this information mainly in tessellated form for display.</p>

<a name="pdf_publishing"></a>
<h3>PDF Publishing</h3>

<p>HOOPS Exchange contains the ability to export to PRC file format. This format is the main container format used within Adobe PDF files for 3D data. HOOPS Exchange extends this capability to convert CAD data directly into these containers for use in PDF publishing.</p>

<p>PLM systems vendors can use HOOPS Exchange as part of a strategy to create intelligent 3D PDF documents that can be used to setup and manage advanced document-based workflows beyond a company’s firewall.</p>

<p>Vendors of CAD systems and downstream manufacturing and analysis systems can make use of HOOPS Exchange to enhance report generation options by including secure 3D data within the PDF file.</p>

<center>
<img src="images/HOOPS_Exchange_4_1_3D_PDF_GDT_in_Acrobat_Reader.jpg">
</center>


<h2>Evaluating HOOPS Exchange</h2>

<h3>Using the API</h3>
<p>For simplicity it is recommended that evaluators write conversion code from HOOPS Exchange in the following step-by-step manner:</p>

<ul>
    <li>Parse and convert tessellated data</li>
    <li>Parse and convert markup and PMI data</li>
    <li>Parse and convert B-rep topology and geometry</li>
</ul>

<p>The basic structure for parsing the in-memory PRC data is roughly the same in each case. This approach is designed with the intention that an evaluator can get started quickly by converting and viewing the tessellated data. This will then provide a solid framework for the more complex tasks that follow.</p>

<p>The HOOPS Exchange installation provides several examples that are useful in aiding a quick understanding of the HOOPS Exchange API. Please see the <a href="samples.html">samples page</a> for more information.</p>

<h3>Using the HOOPS Demo Viewer</h3>
<p>The HOOPS Demonstration Viewer (HDV) is a desktop application which demonstrates how HOOPS Visualize, HOOPS Exchange, and HOOPS Publish work together to provide a complete 3D CAD presentation. HDV is able to load any model file that is supported by HOOPS Exchange. You can then view and interact with model using HOOPS Visualize, our 3D visualization toolkit. Finally, you can use HDV to export the model to a different CAD industry format using HOOPS Exchange or HOOPS Publish. Contact Tech Soft 3D to obtain HOOPS Demo Viewer.</p>

<h2>Reading 3D Files</h2>
<p>Reading CAD files into an Exchange-enabled application is a very simple process. The first step is to set the options to control what data is read, and then call a single API to load the CAD file, which provides access to the original CAD data in the PRC data format.</p>

<h3>Using HOOPS Exchange with Parasolid</h3>
<p>HOOPS Exchange includes a Parasolid connector component. This connector uses the native Parasolid APIs to ensure that the mathematical representation of the source data is correctly matched to the expectations of the Parasolid modeler. During this process, a variety of healing and optimization algorithms are used to ensure the imported model is of the highest quality. If a developer is only interested in the B-rep data, then they can use a single, high-level API which extracts B-rep from any file and brings it into an active Parasolid session. This approach greatly reduces the time needed to integrate HOOPS Exchange into a Parasolid-based application.</p>
 
<h3>Using HOOPS Exchange with other kernel modelers</h3>
<p>HOOPS Exchange provides full access to the B-rep definition of the model, which developers can use to import their model to their geometric engine. APIs are also provided which allow developers to adapt the model to the constraints of their geometry kernel. Operations like splitting periodic surfaces and converting trimming curves between parametric and 3D space are available through this API.</p>

<p>HOOPS Exchange is able to export to a number of B-rep formats, including STEP, IGES, JT, and ACIS. Developers can use these file exporters to avoid needing to query into the B-rep. Instead, they simply use HOOPS Exchange to automatically convert the model to their BREP file of choice, then import that model into their system. The export can be performed on a whole model through one single high-level API, or performed on a per-part basis depending on the preferred use-case. Face and body level attributes are maintained during export.</p>

<h3>The PRC File Format</h3>
<p>PRC format stands for Product Representation Compact Format. PRC is a highly accurate and highly compressible format for describing 3D CAD models including assemblies and Product and Manufacturing Information (PMI). A PRC file is a sequential binary file, written in a portable way.</p>

<p>The PRC format is an openly published format subject to ISO certification ISO/AWI 14739-1. The specification document is included in our documentation and can be viewed <a target="_blank" href="../SC2N570-PRC-WD.pdf">here</a>.</p>

<p>PRC supports PDF-based documentation workflows and can also be used as an independent 3D visualization file format. By using PRC, documents can be created that are interoperable with Computer Aided Manufacturing (CAM) and Computer Aided Engineering (CAE) applications. PRC supports documentation requirements for design reviews as well as distribution of detailed design documentation to supply chains. In addition, its use can help support regulatory mandates which require the use of open standards.</p>

<p>Specifically, PRC supports the following data forms:</p>

<ul>
    <li>Allows storage of large CAD files in a highly compressible form that is a fraction of the original size. The complete product structure of the parts defined by the CAD system is contained in a PRC file.</li>
    <li>Can represent Product and Manufacturing Information (PMI), which includes Geometric Dimensioning and Tolerancing (GD&T) and Functional Tolerancing and Annotation (FT&A).</li>
    <li>Allows geometry use in CAD, CAM, and CAE applications. The geometry can be stored in either a tessellated or precise form.</li>     
</ul>

<p>PRC is currently used in 3D documentation workflows for several large industries, including aerospace, automotive, and architecture. The manufacturing industry has come to rely on PDF for the exchange of manufacturing documentation, distribution of service and parts manuals, and capture and submission of regulatory documentation.</p>

<p>The release of PRC to ISO has accelerated innovation around PRC, driving even broader adoption of PRC, and is helping to ensure that PRC evolves to meet the 3D documentation needs of product manufacturing and related industries.</p>

<p>While there are a number of other 3D file formats, PRC integrates well with document formats such as PDF and XML.
Specifically, PRC supports:</p>

<ol>
    <li style="margin-bottom: 6px;"><i>Structural and geometrical representation</i><br>PRC has direct support for a wide variety of high order primitives that correspond to those used by CAD applications. This permits more of the original design intent of the file to be retained. Compared to other 3D file formats, PRC retains more information about the product structure and relationships defined in the original design application. Other 3D formats take a more general or display-oriented approach to product structure. This may make it harder or impossible to reconstruct aspects of the original design relationships needed to support "manufacturing from a file" or maintenance workflows.</li>
    <li style="margin-bottom: 6px;"><i>File Size</i><br>PRC captures meshes and compresses them far more efficiently than native CAD formats. Files containing both precise geometry and tessellated geometry can be significantly smaller when converted to PRC. This results in great benefits when transporting and storing the data, particularly over limited bandwidth or to wider groups of reviewers and consumers of this data. Even large 3D models can be easily shared over email.</li>
    <li style="margin-bottom: 6px;"><i>Product and Manufacturing Information</i><br>PRC can represent Product and Manufacturing Information (PMI), which is used to primarily communicate the full design intent to suppliers and their shop floors. Without PMI embedded in the file format, OEMs are required to send many 2D drawings to their suppliers to communicate the full design intent. The use of PRC can reduce the need to create 2D drawings from 3D models for distribution to the supply chain.</li>
</ol>

<h3>PRC In-Memory and On-Disk</h3>
<p>In general usage the term PRC is used to mean the PRC file format.</p>

<p>Developers using HOOPS Exchange will encounter another usage of the term PRC to represent the data structures that exist in memory within a HOOPS Exchange process either after a file has been loaded directly or after the application has populated the structures prior to export.</p>

<div align="center"><img src="images/Exchange_architecture.png"></div>
<div class='caption'>HOOPS Exchange stores CAD data in modeler-specific form using in-memory PRC as the intermediate format</div>

<p>These internal data structures used by HOOPS Exchange to store CAD data in a general form that maps very closely to those that define a PRC file on disk. In particular, there is no requirement to write a file to disk during the process of reading a CAD file and then parsing the resulting data into a host application.</p>

<h3><a class="anchor" name="PRCVersioning"></a>PRC Versioning</h3>
<p>The PRC file format contains versioning information that allows both forward and backward compatibility. This is fully implemented by HOOPS Exchange:</p>
   
<ul>
    <li>Forward compatibility: The Exchange libraries are designed to avoid failing if they read a PRC document that conforms
    to future releases of the PRC standard. It does so by ignoring any information it does not understand. </li>
    <li>Backward compatibility: In a major release, the Exchange support for PRC is backward compatible. Each new version of
    the software can read PRC files that conform to an earlier PRC format version. </li>
</ul>


<h3>ISO Certification Process for PRC</h3>
<p>In December 2008, Adobe Systems released the PRC format to the AIIM (<a target="_blank" href="http://www.aiim.org">http://www.aiim.org</a>).</p>

<p>AIIM is an ANSI (American National Standards Institute) accredited standards development organization. AIIM also holds the Secretariat for the ISO (International Standards Organization) committee focused on information management compliance issues, TC 171. TC 171 is the ISO committee that developed the existing ISO standards relating to Adobe PDF/A and PDF/E. Accordingly, AIIM is an authority that ANSI uses to submit proposed standards to ISO.</p>

<p>In June 2010, Adobe transitioned future development of the PRC standard to Tech Soft 3D, which is committed to working together with AIIM to further develop the PRC specification as an open ISO-certified standard.</p>


<h2>Accuracy - Preservation of original parametric information</h2>
<p>Exchange has a full topological structure for describing manifold and non-manifold models. Local tolerances can also be retained for vertices and edges.</p>

<p>The PRC file format comprises the union of all geometric entities defined and used by the major mechanical CAD systems and relevant open standards e.g. STEP and IGES. Each entity is stored in the original parametric form as defined by the originating modeling system.
Therefore, PRC has a significant advantage over many existing standards as there is no requirement for loss of precision or accuracy when 3D curve and surface data is represented in PRC.</p>

<p>Surface definitions are preserved for the following surface types:</p>

<ul>
    <li>Blend</li>
    <li>Cone</li>
    <li>Cylinder</li>
    <li>Extrusion</li>
    <li>Curves</li>
    <li>NURBS</li>
    <li>Offset</li>
    <li>Pipe</li>
    <li>Plane</li>
    <li>Revolution</li>
    <li>Ruled</li>
    <li>Sphere</li>
    <li>Torus</li>
</ul>

<p>All curves and surfaces can be fitted with NURBS curves and surfaces that are accurate to a user specified tolerance.</p>

<h4>Querying Modeler Specific Surfaces</h4>

<p>Access functions are provided so that all modeler specific curves and surfaces can be obtained in their original parametric form. Additionally PRC files containing modeler specific curve and surface definitions can be created from the appropriate functions in HOOPS Exchange.</p>

<h4>Conversion to General Surfaces</h4>
<p>HOOPS Exchange provides functions to convert all modeler-specific curves and surfaces to a standard general standard form i.e. NURBS. A tolerance can be specified for the conversion process so that the resultant curve or surface is accurate to within that tolerance (typically 0.001 mm).</p>

<h4>Measurement</h4>
<p>HOOPS Exchange provides functions to measure the modeler-specific surfaces directly based on the UV parameterisation to return an accurate 3D point.</p>

<h2><a class="anchor" name="Compression"></a>Compression</h2>
<p>Files stored in the PRC format can be highly compressed. A compressed PRC file written by HOOPS Exchange can be typically 100 times smaller than the original proprietary CAD file and is typically three times smaller than U3D, a legacy 3D format still used in PDF. </p>

<h4><a class="anchor" name="RegularCompression"></a>Regular Compression</h4>
<p>Regular compression refers to directly representing the CAD data without loss or transformation from the original CAD system. Regular compression includes:</p>
<ul>
    <li>Modeler-specific representations of curves and surfaces that are often significantly more compressed than a generalized NURBS representation. Preserving them leads to a file that is both smaller and contains more accurate data. </li>
    <li>The PRC format has the concept of current values for certain state information. This means that this state information is not unnecessarily duplicated within the file.</li>
    <li>All sections of a PRC file except header sections are individually compressed with a Flate method. The Flate method is based on public-domain deflate compression, which is a variable-length Lempel-Ziv adaptive compression method cascaded with adaptive Huffman coding. This form of
    compression is considered to be "lossless". It occurs systematically whatever the actual content of the PRC file, and even if it also contains compressed parametric or tessellated geometry. </li>
</ul>

<h4><a class="anchor" name="HighCompression"></a>High Compression</h4>
<p>Regular compression refers to directly representing the CAD data without loss or transformation from the original CAD system. Regular compression includes:</p>

<p>Both parametric and tessellated geometry can be stored in a compressed form in the PRC file to a specified physical tolerance relative to the original shape. This tolerance is typically 0.001mm for parametric data and 0.01mm for tessellated data.</p>

<p>For NURBS data knot vectors, multiplicities, control points and weights are all stored in a compressed format. NURBS can also be approximated using simpler canonical surface forms such as planes and cylinders. For tessellated data triangle meshes, vertex coordinates, normals and textures are all compressed. </p>

<p>A variety of lossy techniques are used including variable coordinate basis, elimination of redundant coordinates and storage of floating point numbers in reduced numbers of bits depending on required precision.</p>



<h2><a class="anchor" name="UnitsTolerancesandTolerantModeling"></a>Units, Tolerances, and Tolerant Modelling</h2>
<p> Each PRC file contains a global unit definition in the header. The unit is specified in multiples of millimeters, with 1 being one millimeter, 10 being one centimeter, etc. In addition an identifier indicates if this unit is the same as the source CAD file. </p>

<p>Additionally, for assemblies of multiple parts, each Product Occurrence can have its own units. However for consistency and ease of use HOOPS Exchange converts all the underlying data into a single unit for the model file. </p>

<p>When formats are read in that do not have units or for whom units are unreliable, HOOPS Exchange defines a default unit. These formats are U3D, STL and Dassault Systemes CGR.</p>

<h4><a class="anchor" name="Tolerances"></a>Tolerances</h4>
<p>There are several types of tolerances associated with HOOPS Exchange and the data in a PRC file:</p>

<ul>
    <li>Tolerances specifying the how tessellated data can be generated from parametric curve and surface data.</li>
    <li>A tolerance specifying how NURBS data should be created from modeler-specific curves and surfaces.</li>
    <li>A tolerance specifying the maximum deviation between data compressed for PRC export and the original data. In HOOPS Exchange there is API access to this value for parametric   surface and curve data but not for tessellated data. </li>
    <li>Tolerance values required to circumvent numerical uncertainty present in all modeling systems. In general this will comprise a value for zero e.g. less than 1e-12, infinity e.g. greater than 1e6 and equality e.g. within 1e-3. These values are used internally and are not available
    in the Exchange API.</li>
</ul>

<p>Tolerance values have no units and need to be combined with the units specified in the Model File and Product Occurrences to get physical real world values.</p>

<p>For example, if the <span class='code'>dTolerance</span> parameter of <span class='code'>A3DGetSurfaceBaseAsNurbs</span> is specified as 0.001 and the unit is 1000 then the real world tolerance is 1mm.</p>

<h4><a class="anchor" name="TolerantModeling"></a>Tolerant Modeling</h4>
<p>Some modeling systems support variable tolerances for tolerant modelling. This is to allow for the situation where sets of faces, edges, or vertices need to be considered as connected even when the distance between the vertex coordinates is greater than the global tolerance for that modeling system.</p>
  
<p>This helps support cases such as translating data from a modeler with a looser tolerance to one with a tighter tolerance.</p>

<p>PRC supports local tolerances on faces, edge and vertices and these are preserved by HOOPS Exchange when they exist in the source CAD file.</p>

<h2><a class="anchor" name="MetadataAndUserData"></a>Names and Other Strings</h2>
<p>String-based attribute data can be added to entities using the miscellaneous attributes mechanism. HOOPS Exchange uses miscellaneous attributes to ensure all names specified within the original CAD file are correctly preserved. Additionally attributes can be used to store user data on any entity.</p>

<p>Character encoding for strings is in UTF8 format.</p>

<h4><a class="anchor" name="UniqueIdentifiers"></a>Unique Identifiers</h4>
<p>Some CAD formats support persistent and non-persistent unique identifiers for entities.</p>

<p>An identifier remains persistent if it remains the same even after the CAD file has been modified, with the exception that if the entity is destroyed the identifier is also removed. An identifier is non-persistent if it could change as successive versions of the file are saved.</p>

<p>CATIA V5, NX, Pro/Engineer and Parasolid XT support persistent identifiers.</p>

<h4><a class="anchor" name="BinaryUserData"></a>Binary User Data</h4>
<p>As well as the ability to store user data using the Miscellaneous Attribute mechanism, application-defined data can be stored as a binary stream in the PRC file associated with subtypes of assemblies, representation items and markup data.</p>

<p>User data is stored as a bit stream along with the size of the stream for that item. This allows an application that does not have the definition for that data to still read the PRC file and even store the data.</p>

<p>In order to distinguish between user data from different applications in the same PRC file each block of user data is identified by a unique identifier for the authoring application. To obtain a unique identifier for your application, please contact Tech Soft 3D.</p>

<h2><a class="anchor" name="TessellationData"></a>HOOPS Exchange support for Tessellation Data</h2>
<p>HOOPS Exchange supports reading tessellated data directly from the original CAD file, and also provides an internal tessellator so that all general and modeler-specific curves and surfaces can be converted to polygon data.</p>

<p>HOOPS Exchange divides tessellation data into three types:</p>

<ul>
    <li>3D Data, for representing 3D surfaces </li>
    <li>Wire Bodies for representing 3D curves and polylines </li>
    <li>Markup data for display of PMI and GD&amp;T </li>
</ul>

<div style="text-align: center;"><img alt="PMI Display" src="images/PMI_display.jpg"></div>
<div class='caption'>HOOPS Exchange stores CAD data in modeler-specific form using in-memory PRC as the intermediate format</div>

<p>For formats where both surface and corresponding tessellated data is available, a flag is available to determine whether to retrieve the tessellated data directly from the file or whether to calculate it from the surface geometry. For:</p>

<ul>
    <li>CATIA V5, SolidWorks, Autodesk Inventor and JT the tessellated data can be read in if present. </li>
    <li>CATIA V4, NX, Pro/Engineer, Parasolid XT, IGES and STEP the tessellated data is always calculated from the surface
    data.</li>
    <li>U3D, IFC and STL only tessellated data is read. </li>
</ul>

<p>The tessellation process is aimed at producing low numbers of polygons for visualization purposes. A separate tessellator is used by the STL export process to create well-formed meshes such that all connecting edges meet at coincident vertices and long-thin triangles are avoided.</p>

<p>Tessellation data supports vertex normals and texture coordinates. Polygonal data can be provided either in a structured form so that each B-rep face and corresponding face loops are identified within the vertex arrays, or the entire body can be represented just as a single tessellated entity. Optimized triangle forms are available i.e. tristrips and trifans.</p>

<h4><a class="anchor" name="TessellationOptions"></a>Tessellation Options</h4>
<p>Tessellation parameters are available to control the degree of tessellation of both curves and surfaces when a file is loaded. For curves the maximum angle between linear chords can be specified.</p>

<p>For surfaces the maximum distance of the tessellated surface from the true surface is expressed as a ratio of the bounding box of the entity. This allows a uniform tessellation of entities irrespective of the physical size of the entity. Additionally a maximum deviation can be specified as can the minimum angle between each edge that forms a triangle.</p>
  
<h2><a class="anchor" name="ConfigurationsandViews"></a>Configurations and Views</h2>
<p>Some CAD formats support multiple configurations of a model or assembly structure. A configuration is a specific arrangement of the model with respect to its defining hierarchy. For example parts may be in different positions, have different geometry or be omitted entirely in different configurations.</p>
  
<p>An example might be a model of a car with the steering wheel on the left side in one configuration and on the right side in a second configuration. A configuration is separate to a view.</p>

<p>HOOPS Exchange supports configurations for CATIA V4, I-deas and SolidWorks. In Pro/Engineer configurations are known as family tables and the initial/generic version is supported.</p>

<h4><a class="anchor" name="Views"></a>Views</h4>
<p> In HOOPS Exchange the term view is used specifically to refer to a particular representation of the 3D scene, including the camera settings, entity visibilities, colors, and positions.</p>

<p> For example a view could be an &#8216;exploded view&#8217; where geometric entities are displayed in different positions and markup labels are used to describe instructions relating to how to assemble the model. A series of such views could comprise a work instruction. </p>

<h2><a class="anchor" name="ExternalLinking"></a>External Linking</h2>
<p> On Microsoft Windows, HOOPS Exchange uses an explicit external linking mechanism to expose API calls to a host application. </p>

<p> Explicit linking requires the application to specifically load and unload the HOOPS Exchange DLL and to obtain the address of each function so that it can then be called via a function pointer. </p>

<p> HOOPS Exchange provides a full set of macros to manage this process and to ensure that application code that calls Exchange functions can look like normal code that uses implicit linking. </p>

<p> External linking offers the application the chance to exit gracefully if for some reason the DLLs are not present. It also allows DLLS in one binary format to be used successfully with different binary formats - for example DLLs built with
Visual Studio 2008 can be used successfully with Visual Studio 2010. </p>

<h2><a class="anchor" name="PMIGD&amp;TandMarkup"></a> PMI and
Markup</h2>
<p> Product and Manufacturing Information is read by HOOPS Exchange and stored in the Markup classes. As well as providing a complete graphical representation, for semantic PMI HOOPS Exchange maintains the logical hierarchy of the PMI as represented in the CAD system. </p>

<p> PMI markups are associated with assemblies, sub-assemblies and parts. If relevant, PMI is associated with individual topology so that feature control frames and datum references can be displayed correctly. Leader lines attach markup items
to geometry. Exchange works to provide an accurate tessellation that looks exactly as it does in the originating CAD system. </p>

<div style="text-align: center;"><img alt="PMIExample" src="images/PMI_Example.jpg"> </div>
<div class='caption'> CATIA V5 PMI example with links to model tree</div>
<p> Exchange provides a complete representation of the PMI associated with a model. PMI information returned by Exchange includes: </p>

<ul>
    <li>Text </li>
    <li>Dimensions </li>
    <li>Arrows </li>
    <li>Balloons </li>
    <li>Datum </li>
    <li>Fasteners </li>
    <li>GD&amp;T </li>
    <li>Measurement Points </li>
    <li>Roughness </li>
    <li>Welding </li>
</ul>

<p> Extensive graphical information is given including color, line width, linestyle, face pattern, font, symbol, transformation matrix and display types e.g. billboarding, in the camera view plane and fixed size. </p>

<p> The Adobe MyriadCAD OpenType font is provided with HOOPS Exchange to ensure standard GD&amp;T symbols are available. Licensees of HOOPS Visualize may also use the Tech Soft 3D TrueType font (<span class='filename'>ts3d.ttf</span>). </p>

<h2><a class="anchor" name="GraphicalAttributes"></a>Graphical
Attributes</h2>
<p> HOOPS Exchange reads and store a variety of graphical attributes from the original CAD files and hierarchical scenegraphs with defined attribute inheritance can be constructed. </p>

<p> Graphical entities include styles, materials, transparency, images, texture pipelines for multi-texturing and advanced blending, line patterns, solid, hatched, dotted and vector fill patterns, ambient, directional, point and spot light definitions and perspective and orthographic cameras. </p>

<h2><a class="anchor" name="ParsingaPRCFile"></a>Parsing a PRC
File</h2>
<h4><a class="anchor" name="ObjectModel"></a>Object Model</h4>
<p> Whilst internally HOOPS Exchange is written in C++ and makes use of class inheritance, to enhance compatibility with other programming languages the API is C-based. The hierarchical object model is retained in the data structures provided
through the API. </p>

<p> The main data types are termed &#8216;PRC Entities&#8217; and these represent classes that are hidden from the HOOPS Exchange developer. Data is obtained from and added to PRC entities through corresponding C structures, and there is one struct
for each PRC entity. </p>

<h4><a class="anchor" name="SystemCallbacks"></a>System
Callbacks</h4>
<p> A variety of callbacks are available to customize memory allocation and deallocation, progress indication and error reporting. </p>

<p> Predefined functions are available to allocate and deallocate memory using the HOOPS Exchange memory manager. Callbacks are available to replace these with an application specific memory manager if desired. </p>

<p> Whilst all necessary functions return a status to indicate success or failure, further messages, warnings and errors can be trapped and handled via the custom report callbacks. </p>

<h4><a class="anchor" name="ErrorHandling"></a>Error Handling</h4>
<p> A wide range of return codes are defined for specific conditions such as bad input data, geometry problems, failure to convert to NURBS, failure to convert to canonicals, inappropriate tolerances and incorrect parameterization, topology problems, incorrect loops, incorrect co-edges, tessellation problems, incorrect markup data etc. </p>

<p> Out of memory conditions are also reported in the return code of the function that caused the condition. </p>

<h4><a class="anchor" name="StructureofParsingCode"></a>Structure
of Parsing Code</h4>
<p> Ideally the code that processes PRC data is structured to reflect the hierarchy of the PRC format, with one function to process or create each of the PRC entities. Additionally, helper functions may be useful to perform repeated tasks, such
as processing or creating attribute data that can apply to a broad category of PRC entities. </p>

<p> The PRC hierarchy is similar whether the application is primarily interested in visualization data, markup and PMI, parametric geometry and topology, or any combination of these.</p>

<p> When integrating HOOPS Exchange an evaluator may initially focus on tessellation data, then hooking up attribute and markup data, and finally B-rep topology and geometry. This step by step approach allows a developer to get the parsing structure correct and quickly visualize the results before tackling the more complex areas of markup and B-rep. </p>

<h2><a class="anchor" name="PDFPublishing"></a>PDF Publishing -
3D PDF and PRC</h2>
<p> PRC is the main 3D container format that is supported within Adobe PDF. Adobe also supports U3D. </p>

<p> U3D is a polygonal format defined by the 3D Industry Forum, which included Intel, Boeing and Adobe. Adobe original chose U3D as the 3D container format for PDF. However U3D does not support accurate surface definitions, so Adobe subsequently
added PRC as an alternate format for representing 3D data within PDF. Adobe continues to support both formats within PDF and Acrobat although U3D is generally recognized as a legacy format. </p>

<p> HOOPS Exchange can read U3D and PRC and write PRC. As previously described in this document, the internal data structures used by HOOPS Exchange correspond closely to the sections within a PRC file. </p>

<p> The main advantages of using PRC for publishing PDF documents are: </p>

<ul>
    <li>PRC is ISO certified </li>
    <li>PRC stores curve and surface data with no loss of accuracy
    </li>
    <li>PRC supports both parametric and polygonal geometry </li>
    <li>PRC is highly compressed &#8211; typically file sizes are three
    times smaller than the corresponding U3D file. </li>
</ul>

<p> The PRC export capability is suitable for use by companies who already have a PDF generation capability. </p>

<p> Companies who wish to define more advanced PDF workflows e.g. for enterprise-wide document management or for document based data exchange outside the company firewall should contact their Tech Soft 3D account manager. </p>

<!--
<h2><a class="anchor" name="ConnectToKernel"></a>Connecting Exchange to a kernel modeler</h2>
<p>In order to use Exchange with your application, you will need to convert the PRC data into your native modeler format. This is generally a straightforward process that involves the following:</p>

<ol>
    <li>Read the CAD data into the PRC format</li>
    <li>Parse the PRC format to retrieve the CAD data</li>
    <li>For each PRC entity, create a corresponding kernel entity. Topology and geometry data structures are reasonably straightforward, since most modelers use similar topology and geometry definitions. Metadata, PMI and visualization generally require that your application define specific modeler data structures for converting this data. For ACIS and Parasolid developers it is recommended that they export SAT/XT data for each body in their model and then simply load each body successively using the standard SAT/XT read capabilities of ACIS and Parasolid respectively.</li>
</ol>

<p>Tech Soft 3D provides consulting services to help with connecting Exchange to popular kernel models such as Parasolid and ACIS.</p>
-->
<h2><a class="anchor" name="Healing"></a>IGES, Healing and our Sew API</h2>
<p>HOOPS Exchange pre-processes all IGES data to maximize our success rate with IGES data. In addition to fixing geometric problems we also try our best to handle corrupt files and incomplete geometric definitions. In addition we provide a sew API which allows you to turn a collection of surfaces into water-tight solids within a user-supplied tolerance. This is done automatically and without any user intervention. Finally, an API is provided which will allow you to post-process imported data and prepare it for import into your system. Some of the things we do here include splitting periodic surfaces, ensuring C1 continuity, moving trimming curves from parameter to 3D space (and vice-versa), eliminating small edges, adjusting topological tolerances as well as a host of other minor modeler-specific adjustments. This functionality is automatically invoked when you export to ACIS and Parasolid to ensure that the imported data can be successfully operated upon by ACIS and Parasolid.</p>

 </p>
</div></div><!-- contents -->

    <div id="accordion" class="sidebar">
		<p class="accordion-toggle">Overview</p>
			<div class="accordion-content default">
				<ul>
					<li><a href="technical_overview.html">Technical&nbsp;Overview</a></li>
					<li><a href="getting_started.html">Getting&nbsp;Started</a></li>
					<li><a href="distributing_your_application.html">Distributing Platforms</a></li>
					<li><a href="supported_platforms.html">Supported Platforms</a></li>
					<li><a href="overview.html">File Formats</a></li>
					<li><a href="release_notes.html">Release&nbsp;Notes</a></li>
					<li><a href="samples.html">Sample Code</a></li>
					<li><a href="acknowledgments.html">Acknowledgments</a></li>
					<li><a href="http://developer.techsoft3d.com/developer-support/" target="_blank">Contact Support</a></li>
				</ul>
			</div>
		<p class="accordion-toggle">Programming Guide</p>
			<div class="accordion-content prog_guide">
				<div class="indent">
					<p class="accordion-toggle">1 Introduction</p>
					<ul>
						<li><a href="introduction.html">1.0 Introduction</a></li>
						<li><a href="initialize_exchange.html">1.1 Initializing HOOPS Exchange</a></li>
						<li><a href="api_conventions.html">1.2 API Conventions</a></li>
					</ul>
					<p class="accordion-toggle">2 Basic Operations</p>
					<ul>
						<li><a href="load_model.html">2.1 Simple Model Load and Export</a></li>
						<li><a href="prc.html">2.2 PRC Basics</a></li>
						<li><a href="building_prc.html">2.3 Building PRC</a></li>
					</ul>
					<p class="accordion-toggle">3 Entities</p>
					<ul>
						<li><a href="product_occurrence.html">3.0 Product Occurrences</a></li>
						<li><a href="product_occurrence.html#partDefinitions">3.1 Part Definitions</a></li>
						<li><a href="product_occurrence.html#prototypes">3.2 Prototypes</a></li>
						<li><a href="product_occurrence.html#externals">3.3 Externals</a></li>
						<li><a href="product_occurrence.html#displayParameters">3.4 Display Parameters</a></li>
						<li><a href="product_occurrence.html#filtersLayers">3.5 Filters and Layers</a></li>
						<li><a href="product_occurrence.html#configurations">3.6 Configurations</a></li>
						<li><a href="persistent_ids.html">3.7 Persistent IDs</a></li>
					</ul>
                    <p class="accordion-toggle">4 Geometry</p>
					<ul>
						<li><a href="reading_geometry.html">4.0 Reading Model Geometry</a></li>
						<li><a href="getting_tessellation.html">4.1 Getting Tessellation</a></li>
						<li><a href="getting_brep.html">4.2 Getting B-rep Data</a></li>
						<li><a href="tessellation_example.html">4.3 Tessellation Example</a></li>
						<li><a href="approx_as_analytic.html">4.4 Display Parameters</a></li>
					</ul>
                    <p class="accordion-toggle">5 Entity Attributes</p>
					<ul>
						<li><a href="colors_materials.html">5.1 Colors and Materials</a></li>
						<li><a href="managing_attribute_inheritance.html">5.2 Managing Attribute Inheritance</a></li>
						<li><a href="transformations.html">5.3 Transformations</a></li>
					</ul>
                    <p><a href="markup.html">6 Markup and Views</a></p>
                    <p class="accordion-toggle">7 Advanced Functions</p>
					<ul>
						<li><a href="advanced.html#computingLengths">7.1 Computing Lengths</a></li>
						<li><a href="advanced.html#physicalProperties">7.2 Getting Physical Properties</a></li>
						<li><a href="advanced.html#modelCompare">7.3 Model Compare</a></li>
						<li><a href="advanced.html#modelSewing">7.4 Model Sewing</a></li>
						<li><a href="advanced.html#computingSections">7.5 Computing Sections</a></li>
						<li><a href="advanced.html#comparingPointClouds">7.6 Model to Point Cloud Comparison</a></li>
						<li><a href="advanced.html#shattered">7.7 Shattered Loading</a></li>
					</ul>
                    <p><a href="hoops_exchange_for_parasolid_developers.html">8 HOOPS Exchange for Parasolid Developers</a></p>
				</div>
			</div>
		<p class="accordion-toggle">API Reference</p>
			<div class="accordion-content api_ref">
				<ul>
					<li><a href="classes.html">Data Structures</a></li>
					<li><a href="f_index.html">Functions</a></li>
					<li><a href="modules.html">Modules</a></li>
					<li><a href="files.html">Files</a></li>
					<li><a href="functions.html">Fields</a></li>
					<li><a href="globals.html">Globals</a></li>
				</ul>
			</div>
    </div>
<div class="footer">
	HOOPS Exchange 2016 SP1 U4&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.techsoft3d.com">www.techsoft3d.com</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://developer.techsoft3d.com">developer.techsoft3d.com</a>
</div>
</body>
</html>