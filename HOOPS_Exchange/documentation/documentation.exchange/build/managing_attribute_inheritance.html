<!doctype html>
<html lang="en-US">
<head>
    <link rel="stylesheet" href="../common/doxygen.css">
	<link rel="stylesheet" href="../common/style.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
	<script src="dynsections.js"></script>
	<script src="../common/sidebar.js"></script>
    <title>HOOPS Exchange Documentation</title>
    <link rel="shortcut icon" href="../common/favicon.ico">
</head>
<body>
<div class="header-background">
	<div class="header-margins">
        <div style="float: left;"><img src="../product/images/logo.png"></div>
        <div style="margin-left: 520px; margin-right: 20px;">
            <div class="search" id="Search"> 
                <form method="get" action="http://developer.techsoft3d.com/cgi/swish-hoops-exchange.cgi" enctype="application/x-www-form-urlencoded" class="form">
                    <label style='color: gray;'>Search: </label>
                    <input maxlength="200" value="" size="20" name="query" type="text">
                </form>
            </div>
        </div>
    </div>
</div>
<div class="cdiv">
<div class="content-body">
<div class="content-internalframe"><!-- Generated by Doxygen 1.8.7 -->
</div><!-- top -->
<div class="contents">
<div class="textblock"><p> 
</div></div>
</p>
<h2>5.2 Managing attribute inheritance</h2>
<p>The PRC assembly tree is hierarchical. As such, certain attributes may be inherited from parent node to child node. Inheritable attributes include visibility, color, transparency, layer, line pattern, and line width. Each type of attribute may be inherited independently. Collectively, all the attributes make up the entity's <em>behavior</em>. HOOPS Exchange uses the concepts of <em>father inheritance</em> and <em>son inheritance</em> to determine how attributes are propagated down the tree.</p>
<p>Inheritance always propagates in one direction - from parent to child. Each type of inheritance has a certain strength that determines whether or not the attribute is passed to child nodes.</p>
<ul class="square">
<li style="margin-bottom: 10px;">
<em>Son inheritance</em> is strongest. A node with son inheritance will always pass its own attributes to child nodes - unless the child nodes also have the son inheritance behavior. If a child node has son inheritance, the child will express its own attributes. Son inheritance will propagate down the assembly tree until the terminal leaf node. </li>
<li style="margin-bottom: 10px;">
<em>Father inheritance</em> also allows a node to pass its attributes to child nodes. However, this only works if the child nodes have no behavior setting of their own. Additionally, son inheritance in a parent node will always override father inheritance of a child node. Subject to the preceding conditions, father inheritance will propagate down the assembly tree until the terminal leaf node. </li>
<li style="margin-bottom: 10px;">
<em>No inheritance</em> - Nodes are not required to have a behavior setting. In this case, the node's attributes will not override the attributes of its children. However, any other type of inheritance propagated from above may override the "no inheritance" setting. "No inheritance" is the implied setting if the node has neither father nor son inheritance. </li>
</ul>
<p>Let's look at a few examples that show how inheritance works in an assembly tree. For this example, we'll use color because it is easy to visualize. In the diagrams below, the colored boxes represent nodes. The color in the top half of each box is the color that was set locally on that node. The color in the bottom half is the color that is actually expressed in the geometry due to the rules of inheritance.</p>
<center> <div class="image">
<img src="images/inheritance1.png" />
</div>
 <div class="caption">In this diagram, son inheritance in the first box overrides the father inheritance in box 2. The orange color continues to propagate down the tree, however the blue box also has son inheritance. Thus, orange stops and blue is propagated.</div> </center> <center> <div class="image">
<img src="images/inheritance2.png" />
</div>
 <div class="caption">Here, father inheritance overrides the color for the boxes in which inheritance is not set at all. However, the red box has father inheritance, so red is used for that box. </div> </center> <center> <div class="image">
<img src="images/inheritance3.png" />
</div>
 <div class="caption">If no inheritance is set, color will only inherit to child nodes with no color of their own. However, the red box has father inheritance, so red is used for that box. </div> </center><p>How does this look in code? Well, behaviors are always associated with an entity's graphical data. Thus, if you need to find the inheritance type for a product occurrence node, you could do something like the following:</p>
<div class="fragment"><div class="line"><span class="comment">// get root-base-with-graphics data from &#39;myProductOccurrence&#39; node</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_root_base_with_graphics_data.html">A3DRootBaseWithGraphicsData</a> rootBaseWithGraphics;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_root_base_with_graphics_data.html">A3DRootBaseWithGraphicsData</a>, rootBaseWithGraphics);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__basewithgraphics.html#ga8cc251a47e47073fe2220f21b98edddf">A3DRootBaseWithGraphicsGet</a>(myProductOccurrence, &amp;rootBaseWithGraphics);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// get graphics data associated with the root-base-with-graphics</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html">A3DGraphicsData</a> graphicsData;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html">A3DGraphicsData</a>, graphicsData);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__graphics.html#ga39c5f3b3b747e674cce063608f24c03a">A3DGraphicsGet</a>(rootBaseWithGraphics.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_root_base_with_graphics_data.html#a6d929c8abdc4f689cb2db46f9bc34764">m_pGraphics</a>, &amp;graphicsData);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// graphicsData.m_usBehaviour has the behavior information</span></div>
</div><!-- fragment --><p>You may have noticed that the field <span class="code">graphicsData.m_usBehaviour</span> is a simple type - <span class="code">A3DUns8</span>, and is used as a bit field. Thus, to get the value for color, you need to perform bitwise operations:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__fundamental__types.html#ga8db2248cdeaeb77adb18df0d02c72fc1">A3DUns8</a> colorInheritance = graphicsData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html#ab612f61d41c156c860d6abf12e7e5ae6">m_usBehaviour</a> &amp; <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__graphicsbits.html#ga8cdfe4f6b9b61062618a584435ca27ec">kA3DGraphicsSonHeritColor</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (colorInheritance)</div>
<div class="line">    <span class="comment">// it is of type kA3DGraphicsSonHeritColor</span></div>
<div class="line"> </div>
<div class="line">colorInheritance = graphicsData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html#ab612f61d41c156c860d6abf12e7e5ae6">m_usBehaviour</a> &amp; <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__graphicsbits.html#gad6dcd502fce21fa4cae73519f532fb5c">kA3DGraphicsFatherHeritColor</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (colorInheritance)</div>
<div class="line">    <span class="comment">// it is of type kA3DGraphicsFatherHeritColor</span></div>
<div class="line">    </div>
<div class="line"><span class="comment">// test for other behavior types</span></div>
</div><!-- fragment --><p>You can see all possible values for the behavior bit field in <span class="filename"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_graphics_8h.html">A3DSDKGraphics.h</a></span>.</p>
<p><a class="anchor" id="entity_references"></a></p><h3>Entity references</h3>
<p>As mentioned previously, attributes such as color and transform are usually computed for an entire entity after considering the effects of the inheritance. In some cases, however, it would be useful to be able to completely override the computed attribute and replace it with another. Additionally, it is not possible to apply an attribute to a single subentity - such as a face - at the product occurrence level. Entity references solve these problems.</p>
<p>The product occurrence node has an entity reference field of type <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__misc__data__types.html#ga977cdcb04229febe46e57c4971da2c08">A3DMiscEntityReference</a>. If this field is not NULL, this indicates the node's attributes should be supplanted by the attributes in the entity reference. You can use this mechanism to redefine color, transparency, visibility, and transformation. Attributes defined in this way are inheritable to child entities.</p>
<h4>Subentity attributes</h4>
<p>The same pattern is used to apply attributes at the subentity level. For example, when a face has a different color than the rest of the model, it will use an entity reference. Doing so requires the model to have a B-rep definition, because tessellation alone does not have a concept of individual faces. This type of reference is of type <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__misc__data__types.html#ga30f361b484af5010755b840e81bc3dba">A3DMiscReferenceOnTopology</a>.</p>
<h3>Other behaviors</h3>
<p>This section mainly dealt with color, but the same concepts apply to all behaviors. One behavior that may require special consideration is the <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__graphicsbits.html#ga6fd78eb7a9a81d2b036e34baa52f0b44">kA3DGraphicsShow</a> flag, which controls entity visibility. Unlike other behaviors, the value is ignored if a <span class="code">SonHeritShow</span> or <span class="code">FatherHeritShow</span> flag is set. Therefore, an invisible entity must have its graphics data set up like this:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html">A3DGraphicsData</a> sGraphicData;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html">A3DGraphicsData</a>, sGraphicData);</div>
<div class="line">sGraphicData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_graphics_data.html#ab612f61d41c156c860d6abf12e7e5ae6">m_usBehaviour</a> = ~<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__graphicsbits.html#ga6fd78eb7a9a81d2b036e34baa52f0b44">kA3DGraphicsShow</a>;</div>
</div><!-- fragment --> </div></div><!-- contents -->

    <div id="accordion" class="sidebar">
		<p class="accordion-toggle">Overview</p>
			<div class="accordion-content overview">
				<ul>
					<li><a href="technical_overview.html">Technical&nbsp;Overview</a></li>
					<li><a href="getting_started.html">Getting&nbsp;Started</a></li>
					<li><a href="distributing_your_application.html">Distributing Platforms</a></li>
					<li><a href="supported_platforms.html">Supported Platforms</a></li>
					<li><a href="overview.html">File Formats</a></li>
					<li><a href="release_notes.html">Release&nbsp;Notes</a></li>
					<li><a href="samples.html">Sample Code</a></li>
					<li><a href="acknowledgments.html">Acknowledgments</a></li>
					<li><a href="http://developer.techsoft3d.com/developer-support/" target="_blank">Contact Support</a></li>
				</ul>
			</div>
		<p class="accordion-toggle">Programming Guide</p>
			<div class="accordion-content default">
				<div class="indent">
					<p class="accordion-toggle">1 Introduction</p>
					<ul>
						<li><a href="introduction.html">1.0 Introduction</a></li>
						<li><a href="initialize_exchange.html">1.1 Initializing HOOPS Exchange</a></li>
						<li><a href="api_conventions.html">1.2 API Conventions</a></li>
					</ul>
					<p class="accordion-toggle">2 Basic Operations</p>
					<ul>
						<li><a href="load_model.html">2.1 Simple Model Load and Export</a></li>
						<li><a href="prc.html">2.2 PRC Basics</a></li>
						<li><a href="building_prc.html">2.3 Building PRC</a></li>
					</ul>
					<p class="accordion-toggle">3 Entities</p>
					<ul>
						<li><a href="product_occurrence.html">3.0 Product Occurrences</a></li>
						<li><a href="product_occurrence.html#partDefinitions">3.1 Part Definitions</a></li>
						<li><a href="product_occurrence.html#prototypes">3.2 Prototypes</a></li>
						<li><a href="product_occurrence.html#externals">3.3 Externals</a></li>
						<li><a href="product_occurrence.html#displayParameters">3.4 Display Parameters</a></li>
						<li><a href="product_occurrence.html#filtersLayers">3.5 Filters and Layers</a></li>
						<li><a href="product_occurrence.html#configurations">3.6 Configurations</a></li>
						<li><a href="persistent_ids.html">3.7 Persistent IDs</a></li>
					</ul>
                    <p class="accordion-toggle">4 Geometry</p>
					<ul>
						<li><a href="reading_geometry.html">4.0 Reading Model Geometry</a></li>
						<li><a href="getting_tessellation.html">4.1 Getting Tessellation</a></li>
						<li><a href="getting_brep.html">4.2 Getting B-rep Data</a></li>
						<li><a href="tessellation_example.html">4.3 Tessellation Example</a></li>
						<li><a href="approx_as_analytic.html">4.4 Display Parameters</a></li>
					</ul>
                    <p class="accordion-toggle">5 Entity Attributes</p>
					<ul>
						<li><a href="colors_materials.html">5.1 Colors and Materials</a></li>
						<li><a href="managing_attribute_inheritance.html">5.2 Managing Attribute Inheritance</a></li>
						<li><a href="transformations.html">5.3 Transformations</a></li>
					</ul>
                    <p><a href="markup.html">6 Markup and Views</a></p>
                    <p class="accordion-toggle">7 Advanced Functions</p>
					<ul>
						<li><a href="advanced.html#computingLengths">7.1 Computing Lengths</a></li>
						<li><a href="advanced.html#physicalProperties">7.2 Getting Physical Properties</a></li>
						<li><a href="advanced.html#modelCompare">7.3 Model Compare</a></li>
						<li><a href="advanced.html#modelSewing">7.4 Model Sewing</a></li>
						<li><a href="advanced.html#computingSections">7.5 Computing Sections</a></li>
						<li><a href="advanced.html#comparingPointClouds">7.6 Model to Point Cloud Comparison</a></li>
						<li><a href="advanced.html#shattered">7.7 Shattered Loading</a></li>
					</ul>
                    <p><a href="hoops_exchange_for_parasolid_developers.html">8 HOOPS Exchange for Parasolid Developers</a></p>
				</div>
			</div>
		<p class="accordion-toggle">API Reference</p>
			<div class="accordion-content api_ref">
				<ul>
					<li><a href="classes.html">Data Structures</a></li>
					<li><a href="f_index.html">Functions</a></li>
					<li><a href="modules.html">Modules</a></li>
					<li><a href="files.html">Files</a></li>
					<li><a href="functions.html">Fields</a></li>
					<li><a href="globals.html">Globals</a></li>
				</ul>
			</div>
    </div>
<div class="footer">
	HOOPS Exchange 2016 SP1 U4&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.techsoft3d.com">www.techsoft3d.com</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://developer.techsoft3d.com">developer.techsoft3d.com</a>
</div>
</body>
</html>