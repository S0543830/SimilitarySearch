<!doctype html>
<html lang="en-US">
<head>
    <link rel="stylesheet" href="../common/doxygen.css">
	<link rel="stylesheet" href="../common/style.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
	<script src="dynsections.js"></script>
	<script src="../common/sidebar.js"></script>
    <title>HOOPS Exchange Documentation</title>
    <link rel="shortcut icon" href="../common/favicon.ico">
</head>
<body>
<div class="header-background">
	<div class="header-margins">
        <div style="float: left;"><img src="../product/images/logo.png"></div>
        <div style="margin-left: 520px; margin-right: 20px;">
            <div class="search" id="Search"> 
                <form method="get" action="http://developer.techsoft3d.com/cgi/swish-hoops-exchange.cgi" enctype="application/x-www-form-urlencoded" class="form">
                    <label style='color: gray;'>Search: </label>
                    <input maxlength="200" value="" size="20" name="query" type="text">
                </form>
            </div>
        </div>
    </div>
</div>
<div class="cdiv">
<div class="content-body">
<div class="content-internalframe"><!-- Generated by Doxygen 1.8.7 -->
</div><!-- top -->
<div class="contents">
<div class="textblock"><p> 
</div></div>
</p>
<h3>4.1 Getting tessellation</h3>
<p>Tessellation entities represent polygon facets. HOOPS Exchange can use a variety of structures for tessellation, and they are all parsed in a slightly different way. Additionally, since representation items can also store B-rep, there is a specific flow to interpreting them. Assuming you have a reference to the representation item, the general operation is as follows:</p>
<center> <div class="image">
<img src="images/tessellation flowchart.png" />
</div>
 </center><h4>Controlling tessellation delivery</h4>
<p>HOOPS Exchange can give you the tessellation for any representation item at any time. However, for many applications, getting the default tessellation is not sufficient because your application may have specific expectations for how it is formed. For this reason, HOOPS Exchange gives you the ability to control how tessellation is delivered. The <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_tessellation_data.html">A3DRWParamsTessellationData</a></span> structure has various fields that affect the delivery:</p>
<ul class="square">
<li>
<span class="code">TessellationLevelOfDetail</span> - A high-level setting comprised of other <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_tessellation_data.html">A3DRWParamsTessellationData</a></span> preset values. Alternatively, your can specify your own set of values if you choose <span class="code">UserDefined</span>. </li>
<li>
<span class="code">AccurateTessellation</span> - By default, the tessellation is set for visualization, which is the right choice for a smaller footprint. Setting this value to <span class="code">true</span> will generate tessellation suited more for analysis. Can be used with all tessellation levels of detail. </li>
<li>
<span class="code">ChordHeightRatio</span> - Specifies the percentage of the model bounding box to be used to compute chord height. </li>
<li>
<span class="code">AngleToleranceDeg</span> - Specifies the angle between two continuous segments of an edge. </li>
<li>
<span class="code">MaxChordHeight</span> (and <span class="code">UseHeightInsteadOfRatio</span>) - Specifies the maximum distance between a surface and the generated tessellation. This is used (instead of <span class="code">ChordHeightRatio</span>) by setting. </li>
<li>
<span class="code">UseHeightInsteadOfRatio</span> - A very small value for <span class="code">MaxChordHeight</span> can cause a very large amount of triangles to be generated. </li>
<li>
<span class="code">KeepUV</span> keeps parametric points as texture points </li>
</ul>
<p>An example of using the <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_tessellation_data.html">A3DRWParamsTessellationData</a></span> structure is shown below:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_tessellation_data.html">A3DRWParamsTessellationData</a> tessellationParameters;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_tessellation_data.html">A3DRWParamsTessellationData</a>, tessellationParameters);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// setting the tessellation detail to &#39;extra low&#39;</span></div>
<div class="line">tessellationParameters.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_tessellation_data.html#a7949f7f08c25a321ce73843676072eb1">m_eTessellationLevelOfDetail</a> = <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__read.html#ggac1fe96a5b9772683a41182babe1559f4a7d56f0e70c3e2577034c5da08e505dd7">kA3DTessLODExtraLow</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// the tessellation itself is retrieved by this call</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__ricontent.html#ga41c7392d735771169d2338022a531ab1">A3DRiRepresentationItemGetTessellation</a>((<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__repitems__types.html#ga388f0de3dcd14843e7f0c4a501c5ade7">A3DRiRepresentationItem</a> *)</div>
<div class="line">    pRepItem, &amp;tessellationParameters);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// get the representation item associated with the tessellation you requested</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_ri_representation_item_data.html">A3DRiRepresentationItemData</a>, repItemData);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__ricontent.html#ga01d2511c9f61ea8221b9e37368272b9c">A3DRiRepresentationItemGet</a>(pRepItem, &amp;repItemData);</div>
</div><!-- fragment --><p>The effect of some of the settings can be seen in this chart:</p>
<table class="doxtable">
<tr>
<th>Level of detail</th><th>AccurateTessellation == true</th><th>AccurateTessellation == false </th></tr>
<tr>
<td>low </td><td><center><div class="image">
<img src="images/tess-examples/1-LOD_low_acc.png" />
</div>
</center> </td><td><center><div class="image">
<img src="images/tess-examples/1-LOD_low.png" />
</div>
</center>  </td></tr>
<tr>
<td>medium </td><td><center><div class="image">
<img src="images/tess-examples/1-LOD_medium_acc.png" />
</div>
</center> </td><td><center><div class="image">
<img src="images/tess-examples/1-LOD_medium.png" />
</div>
</center>  </td></tr>
<tr>
<td>high </td><td><center><div class="image">
<img src="images/tess-examples/1-LOD_high_acc.png" />
</div>
</center> </td><td><center><div class="image">
<img src="images/tess-examples/1-LOD_high.png" />
</div>
</center>  </td></tr>
</table>
<p>More examples of the various quality settings can be found <a href="tessellation_quality_examples.html">here</a>.</p>
<h4>Finding the tessellation type</h4>
<p>After the tessellation is generated by a call to <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__ricontent.html#ga41c7392d735771169d2338022a531ab1">A3DRiRepresentationItemGetTessellation</a>, HOOPS Exchange can use a variety of different data structures to represent tessellation depending on how the triangles are arranged. Therefore, to get the actual geometry that makes up the tessellation, you first need to examine the tessellation type before getting a reference to the underlying data structure. Possible types include:</p>
<ul class="square">
<li>
<span class="code">A3DBaseTessData</span> : contains a point array <span class="code">m_pdCoords</span> used to define triangles and lines </li>
<li>
<a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a> : contains normals [<span class="code">m_pdNormals</span>] and an index array [<span class="code">m_puiTriangulatedIndexes</span>] which are used to display a shell or solid </li>
<li>
<a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_wire_data.html">A3DTess3DWireData</a> : used to display lines or curves </li>
<li>
<span class="code">A3DFaceTess3DData</span> : used to display groups of triangles, quads, strips, or defines solid faces </li>
<li>
<span class="code">A3DTessMarkup</span> : defines markup visualization information [PMI] </li>
</ul>
<p>Like B-rep, tessellation is always stored as part of a representation item. The tessellation types have the following UML relationships:</p>
<center> <div class="image">
<img src="images/uml-tess.png" />
</div>
 </center><p>When you ask HOOPS Exchange to examine a representation item and return the tessellation type, it will return the type as some constant starting with <span class="code">kA3DTypeTess</span>. The <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__type__functions.html#ga9ff2b9f4eb31961b4d68a1b17f270bdd">A3DEntityGetType</a> method gets this constant for any HOOPS Exchange object, including tessellation types. Therefore, you could do this to get the type:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__types__enum.html#ga4e3c6bc1e67a6f663cd1ee85ef7dc70f">A3DEEntityType</a> eType;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__type__functions.html#ga9ff2b9f4eb31961b4d68a1b17f270bdd">A3DEntityGetType</a>(repItemData.m_pTessBase, eType);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// find out the object&#39;s type</span></div>
<div class="line"><span class="keywordflow">switch</span> (eType)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">case</span> <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__types__enum.html#gga4e3c6bc1e67a6f663cd1ee85ef7dc70fa716998a5008a8e57a92e79795aca60a9">kA3DTypeTess3D</a>:</div>
<div class="line">        <span class="comment">// handle tessellation with normals and index array</span></div>
<div class="line">        <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a> sTess3DData;</div>
<div class="line">        <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a>, sTess3DData);</div>
<div class="line">        <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tess3d.html#ga65ac3f3fe8a638fac2408e6abd008de0">A3DTess3DGet</a>(pTess3D, &amp;sTess3DData);</div>
<div class="line">    <span class="keywordflow">case</span> <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__types__enum.html#gga4e3c6bc1e67a6f663cd1ee85ef7dc70fa4d6d2c049223531837f4170bf7e3f856">kA3DTypeTess3DWire</a>:</div>
<div class="line">        <span class="comment">// handle wire tessellation</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    <span class="keywordflow">case</span> <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__types__enum.html#gga4e3c6bc1e67a6f663cd1ee85ef7dc70fa20ed7d5b9898441ad96e611ce1bf9167">kA3DTypeTessBase</a>:</div>
<div class="line">        <span class="comment">// handle triangle tessellation</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// test for other types</span></div>
<div class="line">}</div>
</div><!-- fragment --><h3>4.1.1 Getting the triangles</h3>
<p>Getting the tessellated triangles from a PRC representation item can be complicated for the uninitiated. However, by following the steps below, the operation should be simpler to understand:</p>
<p><b>Step 1: Get the tessellation vertices</b></p>
<p>Now that you know the tessellation type and have a reference to the data structure, you can get the vertices and faces that make up the geometry. To get the raw points associated with the model, examine the representation item's <span class="code">m_pTessBase::m_pdCoords</span> field:</p>
<div class="fragment"><div class="line"><span class="comment">// get the tessellation base entity from the representation item</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tessellation__types.html#ga978fcb78ca2b5b41bda5ca7957872a33">A3DTessBase</a>* tessBase = riData.m_pTessBase;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// fill the tessellation data structure</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html">A3DTessBaseData</a> tessBaseData;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html">A3DTessBaseData</a>, tessBaseData);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tessellation__base.html#gac472a21603f5851e113a84da3764288b">A3DTessBaseGet</a>(tessBase, &amp;tessBaseData);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n = 0; n &lt; tessBaseData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html#a6912b0bc3a0ecf01a66de608918f1ac3">m_uiCoordSize</a>; n++)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// get each coordinate</span></div>
<div class="line">    tessBaseData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html#afe3405b588e3019d75302da0c1bbdc4f">m_pdCoords</a>[n];</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Step 2: Accessing the index array</b></p>
<p>The code snippet in Step 1 gives you the model's vertices but does not tell you how the faces are connected. Connectivity information is stored in an array within each tessellation structure. For example, in <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a></span>, the <span class="code">m_puiTriangulatedIndexes</span> array.</p>
<p>For this example, imagine our index array looks like this:</p>
<div class="fragment"><div class="line"><span class="comment">// pseudocode example</span></div>
<div class="line">sTess3DData.m_puiTriangulatedIndexes = [ X X X 6 12 15 21 24 27 30 33 36 </div>
<div class="line">                                         39 45 48 51 54 60 81 84 87 90 93 96 99</div>
<div class="line">                                         105 102 108 111 114 117 130 ]</div>
<div class="line">                                         </div>
<div class="line"><span class="comment">// offset into m_puiTriangulatedIndexes where data begins</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html#af23d6f95e9b29b30fe311df956b27c9e">A3DTessFaceData::m_uiStartTriangulated</a> = 4;</div>
</div><!-- fragment --><p>This array controls the relationship between points and faces. The meaning of each value will be explained in Step 4. But we need one more piece of information first.</p>
<p><b>Step 3: Find tessellation representation</b></p>
<p>CAD systems will often optimize lists of triangles by removing redundant vertices and forming triangle strips or fans. HOOPS Exchange uses the same concepts to represent tessellation in PRC. <span class="code">A3DTess3DData::m_psFaceTessData::m_usUsedEntitiesFlags</span> is a bit field flag which indicates the types of tessellation present in the tessellation structure. Possible tessellation types include triangles, triangle strips, and triangle fans. You should check which types of tessellation are present because the result will affect the way the rest of the structure is interpreted.</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a> sTess3DData;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html">A3DTess3DData</a>, sTess3DData);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__tess3d.html#ga65ac3f3fe8a638fac2408e6abd008de0">A3DTess3DGet</a>(pTess3D, &amp;sTess3DData);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// iterate over the faces</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__fundamental__types.html#gab2cb7cff76e38fac0d949f7cf3e7b6b7">A3DUns32</a> tessArraySize = sTess3DData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a2e0c075962aee85cb721510c6ce60750">m_uiFaceTessSize</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tessArraySize; i++)</div>
<div class="line">{</div>
<div class="line">    <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html">A3DTessFaceData</a> &amp;sTessFaceData = sTess3DData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#aed795a8c789d94cdcea693785e309d3b">m_psFaceTessData</a>[i];</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// get the specific tessellation type</span></div>
<div class="line">    <span class="keywordflow">if</span> (sTessFaceData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html#adb831129cd721fdcadca6f6c2a236706">m_usUsedEntitiesFlags</a> &amp; kA3DTessFaceDataTriangleStripe)</div>
<div class="line">        <span class="comment">// triangle strips are used</span></div>
<div class="line">        ;</div>
<div class="line">        </div>
<div class="line">    <span class="keywordflow">if</span> (sTessFaceData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html#adb831129cd721fdcadca6f6c2a236706">m_usUsedEntitiesFlags</a> &amp; kA3DTessFaceDataTriangleFan)</div>
<div class="line">        <span class="comment">// triangle fans are used</span></div>
<div class="line">        ;   </div>
</div><!-- fragment --><p><b>Step 4: Interpret index array</b></p>
<p>Finally, we have enough information to get the complete tessellation. The <span class="code">A3DTess3DData::m_psFaceTessData::m_puiSizesTriangulated</span> field is the array which brings together all the information we've collected. Let's imagine that the array has this value:</p>
<div class="fragment"><div class="line"><span class="comment">// pseudocode example</span></div>
<div class="line">m_puiSizesTriangulated = [ 3 2 7 6 1 7 ]</div>
</div><!-- fragment --><p>This array represents the tessellation types and the number of vertices that correspond to that type. Tessellation metadata is always packed in the following way:</p>
<center> <div class="image">
<img src="images/tessellation array explanation.png" />
</div>
 </center><p>We'll use this information to interpret the array in the following code snippet. This is one such arrangement the array could represent:</p>
<center> <div class="image">
<img src="images/tessellation types labeled.png" />
</div>
 </center><p>In this image, the red color indicates individual triangles, the orange indicates triangle strips, and the grey indicates triangle fans. The numbers on the vertices correspond to the array <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a83fd20f09845e8313f73fa91da0d69bd">A3DTess3DData::m_puiTriangulatedIndexes</a>, which in turn indexes the <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html#afe3405b588e3019d75302da0c1bbdc4f">A3DTessBaseData::m_pdCoords</a> array. Revisiting the <span class="code">m_puiTriangulatedIndexes</span> array:</p>
<div class="fragment"><div class="line"><span class="comment">// pseudocode example</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// offset into m_puiTriangulatedIndexes where data begins</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_face_data.html#af23d6f95e9b29b30fe311df956b27c9e">A3DTessFaceData::m_uiStartTriangulated</a> = 2;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// the index array</span></div>
<div class="line">sTess3DData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a83fd20f09845e8313f73fa91da0d69bd">m_puiTriangulatedIndexes</a> = [ X X X 6 12 15 21 24 27 30 33 36        <span class="comment">// three triangles</span></div>
<div class="line">                                         39 45 48 51 54 60 81 84 87 90 93 96 99 <span class="comment">// two fans</span></div>
<div class="line">                                         105 102 108 111 114 117 130 ]          <span class="comment">// one strip</span></div>
</div><!-- fragment --><p>From <span class="code">m_puiSizesTriangulated</span> with value [ 3 2 7 6 1 7 ], we know we have 3 triangles - starting from offset 2 in the array - and they are made from the indices [6 12 15], [21 24 27], and [30 33 36]. Each of these indices point to a set of 3 entries in <span class="code">m_pdCoords</span>. Using this information, we know the first triangle would have these points:</p>
<ul class="square">
<li>
<span class="code">x = m_pdCoords[6], y = m_pdCoords[7], z = m_pdCoords[8]</span> </li>
<li>
<span class="code">x = m_pdCoords[12], y = m_pdCoords[13], z = m_pdCoords[14]</span> </li>
<li>
<span class="code">x = m_pdCoords[15], y = m_pdCoords[16], z = m_pdCoords[17]</span> </li>
</ul>
<p>Next, <span class="code">m_puiSizesTriangulated</span> indicates we have 2 triangle fans. It also tells us the first fan has 7 indices - [39 45 48 51 54 60 81], and the second fan has 6 - [84 87 90 93 96 99]. Finally, we read the triangle strips. We have one strip: [105 102 108 111 114 117 130].</p>
<h4>Summary</h4>
<ul class="square">
<li>
<span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess_base_data.html#afe3405b588e3019d75302da0c1bbdc4f">A3DTessBaseData::m_pdCoords</a></span> are the tessellation coordinates. This array is indexed by <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a83fd20f09845e8313f73fa91da0d69bd">A3DTess3DData::m_puiTriangulatedIndexes</a></span> </li>
<li>
<span class="code">m_uiStartTriangulated</span> is the offset into <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a83fd20f09845e8313f73fa91da0d69bd">A3DTess3DData::m_puiTriangulatedIndexes</a></span> at which the tessellation indices begin </li>
<li>
Use <span class="code">usUsedEntitiesFlags</span> to determine what kind of triangle representations exist </li>
<li>
Use <span class="code">m_uiSizesTriangulate</span> to interpret the meaning of <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_tess3_d_data.html#a83fd20f09845e8313f73fa91da0d69bd">A3DTess3DData::m_puiTriangulatedIndexes</a></span> </li>
</ul>
<p><span class="todo">A3DTess3DData::m_psFaceTessData::m_pucRGBAVertices has the tessellation color data</span></p>
<p>At this point, you know the type of tessellation and can process it accordingly. All that is left is to represent the relevant data from the 3D tessellation data element in your export structure.</p>
<p>For an example on creating tessellation entities, see this <a href="tessellation_example.html">tessellation example</a>.</p>
</div></div><!-- contents -->

    <div id="accordion" class="sidebar">
		<p class="accordion-toggle">Overview</p>
			<div class="accordion-content overview">
				<ul>
					<li><a href="technical_overview.html">Technical&nbsp;Overview</a></li>
					<li><a href="getting_started.html">Getting&nbsp;Started</a></li>
					<li><a href="distributing_your_application.html">Distributing Platforms</a></li>
					<li><a href="supported_platforms.html">Supported Platforms</a></li>
					<li><a href="overview.html">File Formats</a></li>
					<li><a href="release_notes.html">Release&nbsp;Notes</a></li>
					<li><a href="samples.html">Sample Code</a></li>
					<li><a href="acknowledgments.html">Acknowledgments</a></li>
					<li><a href="http://developer.techsoft3d.com/developer-support/" target="_blank">Contact Support</a></li>
				</ul>
			</div>
		<p class="accordion-toggle">Programming Guide</p>
			<div class="accordion-content default">
				<div class="indent">
					<p class="accordion-toggle">1 Introduction</p>
					<ul>
						<li><a href="introduction.html">1.0 Introduction</a></li>
						<li><a href="initialize_exchange.html">1.1 Initializing HOOPS Exchange</a></li>
						<li><a href="api_conventions.html">1.2 API Conventions</a></li>
					</ul>
					<p class="accordion-toggle">2 Basic Operations</p>
					<ul>
						<li><a href="load_model.html">2.1 Simple Model Load and Export</a></li>
						<li><a href="prc.html">2.2 PRC Basics</a></li>
						<li><a href="building_prc.html">2.3 Building PRC</a></li>
					</ul>
					<p class="accordion-toggle">3 Entities</p>
					<ul>
						<li><a href="product_occurrence.html">3.0 Product Occurrences</a></li>
						<li><a href="product_occurrence.html#partDefinitions">3.1 Part Definitions</a></li>
						<li><a href="product_occurrence.html#prototypes">3.2 Prototypes</a></li>
						<li><a href="product_occurrence.html#externals">3.3 Externals</a></li>
						<li><a href="product_occurrence.html#displayParameters">3.4 Display Parameters</a></li>
						<li><a href="product_occurrence.html#filtersLayers">3.5 Filters and Layers</a></li>
						<li><a href="product_occurrence.html#configurations">3.6 Configurations</a></li>
						<li><a href="persistent_ids.html">3.7 Persistent IDs</a></li>
					</ul>
                    <p class="accordion-toggle">4 Geometry</p>
					<ul>
						<li><a href="reading_geometry.html">4.0 Reading Model Geometry</a></li>
						<li><a href="getting_tessellation.html">4.1 Getting Tessellation</a></li>
						<li><a href="getting_brep.html">4.2 Getting B-rep Data</a></li>
						<li><a href="tessellation_example.html">4.3 Tessellation Example</a></li>
						<li><a href="approx_as_analytic.html">4.4 Display Parameters</a></li>
					</ul>
                    <p class="accordion-toggle">5 Entity Attributes</p>
					<ul>
						<li><a href="colors_materials.html">5.1 Colors and Materials</a></li>
						<li><a href="managing_attribute_inheritance.html">5.2 Managing Attribute Inheritance</a></li>
						<li><a href="transformations.html">5.3 Transformations</a></li>
					</ul>
                    <p><a href="markup.html">6 Markup and Views</a></p>
                    <p class="accordion-toggle">7 Advanced Functions</p>
					<ul>
						<li><a href="advanced.html#computingLengths">7.1 Computing Lengths</a></li>
						<li><a href="advanced.html#physicalProperties">7.2 Getting Physical Properties</a></li>
						<li><a href="advanced.html#modelCompare">7.3 Model Compare</a></li>
						<li><a href="advanced.html#modelSewing">7.4 Model Sewing</a></li>
						<li><a href="advanced.html#computingSections">7.5 Computing Sections</a></li>
						<li><a href="advanced.html#comparingPointClouds">7.6 Model to Point Cloud Comparison</a></li>
						<li><a href="advanced.html#shattered">7.7 Shattered Loading</a></li>
					</ul>
                    <p><a href="hoops_exchange_for_parasolid_developers.html">8 HOOPS Exchange for Parasolid Developers</a></p>
				</div>
			</div>
		<p class="accordion-toggle">API Reference</p>
			<div class="accordion-content api_ref">
				<ul>
					<li><a href="classes.html">Data Structures</a></li>
					<li><a href="f_index.html">Functions</a></li>
					<li><a href="modules.html">Modules</a></li>
					<li><a href="files.html">Files</a></li>
					<li><a href="functions.html">Fields</a></li>
					<li><a href="globals.html">Globals</a></li>
				</ul>
			</div>
    </div>
<div class="footer">
	HOOPS Exchange 2016 SP1 U4&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.techsoft3d.com">www.techsoft3d.com</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://developer.techsoft3d.com">developer.techsoft3d.com</a>
</div>
</body>
</html>