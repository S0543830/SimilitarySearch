<!doctype html>
<html lang="en-US">
<head>
    <link rel="stylesheet" href="../common/doxygen.css">
	<link rel="stylesheet" href="../common/style.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
	<script src="dynsections.js"></script>
	<script src="../common/sidebar.js"></script>
    <title>HOOPS Exchange Documentation</title>
    <link rel="shortcut icon" href="../common/favicon.ico">
</head>
<body>
<div class="header-background">
	<div class="header-margins">
        <div style="float: left;"><img src="../product/images/logo.png"></div>
        <div style="margin-left: 520px; margin-right: 20px;">
            <div class="search" id="Search"> 
                <form method="get" action="http://developer.techsoft3d.com/cgi/swish-hoops-exchange.cgi" enctype="application/x-www-form-urlencoded" class="form">
                    <label style='color: gray;'>Search: </label>
                    <input maxlength="200" value="" size="20" name="query" type="text">
                </form>
            </div>
        </div>
    </div>
</div>
<div class="cdiv">
<div class="content-body">
<div class="content-internalframe"><!-- Generated by Doxygen 1.8.7 -->
</div><!-- top -->
<div class="contents">
<div class="textblock"><p> 
</div></div>
</p>
<h2>2.1 Simple load and export</h2>
<p>HOOPS Exchange can be used within your application in two different ways - as a <em>direct</em> or <em>indirect</em> integration.</p>
<p>A <b>direct integration</b> means you are accessing the assembly tree structure, parsing entities, and using that information to inspect the model data or otherwise provide a feature-rich experience to the end user. For information on how you would do this, see section 4, <a href="reading_geometry.html">Reading model geometry</a>.</p>
<p>An <b>indirect integration</b> means you are simply reading a model file and using HOOPS Exchange to write it in a different format without reading the assembly tree.</p>
<h3><a class="anchor" id="loading_model"></a>Loading a model</h3>
<p>Start HOOPS Exchange by initializing the libraries and setting the license key. That process is described in the <a href="initialize_exchange.html">initialization section</a>.</p>
<p>Once HOOPS Exchange is initialized, you can use it to load a CAD model into memory. CAD files can be imported with a minimal amount of code:</p>
<div class="fragment"><div class="line">A3DSDKHOOPSExchangeLoader sHoopsExchangeLoader(myFilename);</div>
<div class="line"> </div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_error_codes_8h.html#a17437603063ca9478a3303e98b5b72c5">A3DStatus</a> importResult = sHoopsExchangeLoader.Import(A3DImport(filename));</div>
</div><!-- fragment --><p>If you're doing an indirect integration, you're done. You can export the file as another format by using the code in the next subsection.</p>
<p>For direct integrations, you'll need access to the model file pointer. This pointer gives you a reference to the root of the assembly tree:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__structure__types.html#gac7a33edf07bb7f390e7b05f1c71827ac">A3DAsmModelFile</a>* myModelPtr = sHoopsExchangeLoader.m_psModelFile;</div>
</div><!-- fragment --><h4>Loading a CAD file with custom options</h4>
<p>Many file formats contain extraneous data that is not necessary for all situations. Therefore, before loading the file, you should set the file import parameters to load only the specific data required by your application. Doing so decreases the memory footprint, CPU load, and load time. These parameters are set using the <a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_load_data.html">A3DRWParamsLoadData</a> structure:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_load_data.html">A3DRWParamsLoadData</a> sReadParam;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_load_data.html">A3DRWParamsLoadData</a>, sReadParam);</div>
<div class="line">sReadParam.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_load_data.html#aba1c07385c0ef49e5b99b0ac9895013b">m_sGeneral</a>.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_general_data.html#a02404f7977d712941ccd54de3e6248a9">m_bReadSolids</a> = <span class="keyword">true</span>;</div>
<div class="line">sReadParam.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_load_data.html#aba1c07385c0ef49e5b99b0ac9895013b">m_sGeneral</a>.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_general_data.html#a6c2407fa19dc1d71f9dcc6c8d895224c">m_bReadSurfaces</a> = <span class="keyword">true</span>;</div>
<div class="line">sReadParam.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_load_data.html#aba1c07385c0ef49e5b99b0ac9895013b">m_sGeneral</a>.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_general_data.html#abf96d02b9d0cc24dad58a61fa608bd01">m_bReadPmis</a> = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ... set other A3DRWParamsLoadData fields as necessary</span></div>
<div class="line"> </div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__structure__types.html#gac7a33edf07bb7f390e7b05f1c71827ac">A3DAsmModelFile</a>* pModelFile = NULL;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__read.html#ga7ee6068a28ef6da0fefd2b970efa5a26">A3DAsmModelFileLoadFromFile</a>(<span class="stringliteral">&quot;output.3.prc&quot;</span>, &amp;sReadParam, &amp;pModelFile);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// alternatively, if you&#39;ve used the A3DSDKHOOPSExchangeLoader:</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__modelfile.html#gac48743d9372a60215ada1b887c0d9e81">A3DAsmModelFileGet</a>(sHoopsExchangeLoader.m_psModelFile, &amp;modelFileData);</div>
</div><!-- fragment --><p>The end result of successful file load is a model file pointer. This structure represents the root entity for a model file. Through it, you can access the assembly tree. There is only one model file per model.</p>
<center> <div class="image">
<img src="images/model_file.png" />
</div>
 </center><p>Once in memory, the model is represented by a PRC assembly tree that is equivalent to its native structure. Note that <span class="code">pModelFile</span> points to a model file node. Nodes always have data associated with them, but this data is not populated by default. The following code sample fills the node's data structure so that you can access the information within:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_asm_model_file_data.html">A3DAsmModelFileData</a> modelFileData; <span class="comment">// will contain node data</span></div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_asm_model_file_data.html">A3DAsmModelFileData</a>, modelFileData);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__modelfile.html#gac48743d9372a60215ada1b887c0d9e81">A3DAsmModelFileGet</a>(pModelFile, &amp;modelFileData);</div>
</div><!-- fragment --><p>At this point, the model file is loaded into memory and you can use the <span class="code">modelFileData</span> structure to access the assembly tree. As noted above, this is the route you would take to perform a direct integration. For information on how you would do this, see section 7, <a href="reading_geometry.html">Reading model geometry</a>.</p>
<p>A PRC assembly tree can contain any number of nodes, and in many cases, they will be nested several levels deep. In order to gather all the information from the PRC, your traversal algorithm must visit every node. Typically, this is done through recursion.</p>
<h4>Loading a PDF model</h4>
<p>A PDF file can potentially contain multiple 3D data streams. Therefore, simply using <span class="code">A3DAsmModelFileLoadFromFile</span> or <span class="code">A3DAsmModelFileGet</span> will not work because those functions can only handle a single data stream. To load a PDF, you need to use <span class="code">A3DGet3DPDFStreams</span>.</p>
<p>PDF data can be either in PRC or U3D format. If the data is PRC, you can load it from memory. If U3D, you must write the data to a temporary file before reading it using <span class="code">A3DPDF3DStreamCreateFromFile</span>.</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_stream3_d_p_d_f_data.html">A3DStream3DPDFData</a>* pStream3DPDFData;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__fundamental__types.html#gadb795b7e91d100ff8557dca9e17ef1aa">A3DInt32</a> iNumStreams;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__read.html#ga29757e2c4c15d52bc454cf62d3b9af6e">A3DGet3DPDFStreams</a>((<span class="keywordtype">char</span>*) pcFileName, &amp;pStream3DPDFData, &amp;iNumStreams);</div>
<div class="line"></div>
<div class="line"><span class="comment">// a real use case might parse every stream in the input file. Here, we just take the first one (pStream3DPDFData[0]).</span></div>
<div class="line"><span class="keywordflow">if</span> (pStream3DPDFData[0].m_bIsPrc) <span class="comment">// test whether the data is PRC or U3D</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// even an input PRC file must be read in memory and mapped into modelfile data structures</span></div>
<div class="line">    <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__misc__data__types.html#ga1cda637b58c4b9df58c22bbeaea19f75">A3DRWParamsPrcReadHelper</a>* pPrcReadHelper;</div>
<div class="line">    <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__read.html#gad8bb95c8f235df5191c1881c772205d0">A3DAsmModelFileLoadFromPrcStream</a>(pStream3DPDFData[0].m_pcStream, pStream3DPDFData[0].m_iLength, &amp;pPrcReadHelper, ppModelFile);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// A U3D stream must first be stored as a physical file, then read by A3DAsmModelFileLoadFromFile</span></div>
<div class="line">    sprintf(tempfilename, <span class="stringliteral">&quot;%s.u3d&quot;</span>, OUT_FILE);</div>
<div class="line">    FILE * pFile = fopen(tempfilename , <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    fwrite(pStream3DPDFData[0].m_pcStream, 1, pStream3DPDFData[0].m_iLength , pFile);</div>
<div class="line">    fclose(pFile);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// physical file to stream</span></div>
<div class="line">    <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__read.html#ga7ee6068a28ef6da0fefd2b970efa5a26">A3DAsmModelFileLoadFromFile</a>(tempfilename, sReadParam, ppModelFile);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// the temp file can be disposed of afterwards</span></div>
<div class="line">    <span class="keyword">remove</span>(tempfilename);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="exporting_model"></a>Exporting a model</h3>
<p>Exporting your model is similar to importing - simply reverse the procedure. You need only three things: the model file pointer, the export parameters structure, and the target filename. The supported export formats can be found <a href="overview.html#writers">here</a>.</p>
<h4>Indirect integration with the HOOPSExchangeLoader</h4>
<p>Exporting a file with the <span class="code">HOOPSExchangeLoader</span> is the preferred method when you are doing an indirect integration. Simply specify the filename of the import file and the export file. The export file type is determined by the file extension, so you should use a known file extension for the file format.</p>
<div class="fragment"><div class="line">A3DImport sImport(importFilename);</div>
<div class="line">A3DExport sExport(exportFilename);</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_error_codes_8h.html#a17437603063ca9478a3303e98b5b72c5">A3DStatus</a> iRet = sHoopsExchangeLoader.Convert(sImport, sExport);</div>
</div><!-- fragment --><h4>Direct integration</h4>
<p>Export options vary widely between file types. However, all export data structures have the following name:</p>
<div class="fragment"><div class="line">A3DRWParamsExport*Data</div>
</div><!-- fragment --><p>...where * is substituted with the file type. Suppose you are exporting a STEP file. Configure a <span class="code"><a class="elRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_export_step_data.html">A3DRWParamsExportStepData</a></span> data structure to suit your needs. Then, to export your model, you would do something like this:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_export_step_data.html">A3DRWParamsExportStepData</a> sParamsExportData;</div>
<div class="line"><a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./_a3_d_s_d_k_initialize_functions_8h.html#a874707247fe3898ce09144884ea08eb3">A3D_INITIALIZE_DATA</a>(<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_export_step_data.html">A3DRWParamsExportStepData</a>, sParamsExportData);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// set export options</span></div>
<div class="line">sParamsExportData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_export_step_data.html#ab17ce385c872e4af49241096a0cf1c41">m_bSaveFacetedToWireframe</a> = <span class="keyword">true</span>;</div>
<div class="line">sParamsExportData.<a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./struct_a3_d_r_w_params_export_step_data.html#a89d690650e250f2bef9dbc80a21e3d9b">m_bSaveAnalyticsToNurbs</a> = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">iRet = <a class="codeRef" doxygen="D:/Jenkins/workspace/MakeDoc_Hoops3DX/final-package/documentation.exchange/build/api_ref/exchange.tag:./" href="./group__a3d__write.html#ga8a678ab2bdfdc17e0b955904ee9aeeb7">A3DAsmModelFileExportToStepFile</a>(pModelFile, &amp;sParamsExportData, pcOutputFileName);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (iRet != A3D_SUCCESS)</div>
<div class="line">    <span class="comment">// handle error</span></div>
</div><!-- fragment --><p><br />
 </p>
</div></div><!-- contents -->

    <div id="accordion" class="sidebar">
		<p class="accordion-toggle">Overview</p>
			<div class="accordion-content overview">
				<ul>
					<li><a href="technical_overview.html">Technical&nbsp;Overview</a></li>
					<li><a href="getting_started.html">Getting&nbsp;Started</a></li>
					<li><a href="distributing_your_application.html">Distributing Platforms</a></li>
					<li><a href="supported_platforms.html">Supported Platforms</a></li>
					<li><a href="overview.html">File Formats</a></li>
					<li><a href="release_notes.html">Release&nbsp;Notes</a></li>
					<li><a href="samples.html">Sample Code</a></li>
					<li><a href="acknowledgments.html">Acknowledgments</a></li>
					<li><a href="http://developer.techsoft3d.com/developer-support/" target="_blank">Contact Support</a></li>
				</ul>
			</div>
		<p class="accordion-toggle">Programming Guide</p>
			<div class="accordion-content default">
				<div class="indent">
					<p class="accordion-toggle">1 Introduction</p>
					<ul>
						<li><a href="introduction.html">1.0 Introduction</a></li>
						<li><a href="initialize_exchange.html">1.1 Initializing HOOPS Exchange</a></li>
						<li><a href="api_conventions.html">1.2 API Conventions</a></li>
					</ul>
					<p class="accordion-toggle">2 Basic Operations</p>
					<ul>
						<li><a href="load_model.html">2.1 Simple Model Load and Export</a></li>
						<li><a href="prc.html">2.2 PRC Basics</a></li>
						<li><a href="building_prc.html">2.3 Building PRC</a></li>
					</ul>
					<p class="accordion-toggle">3 Entities</p>
					<ul>
						<li><a href="product_occurrence.html">3.0 Product Occurrences</a></li>
						<li><a href="product_occurrence.html#partDefinitions">3.1 Part Definitions</a></li>
						<li><a href="product_occurrence.html#prototypes">3.2 Prototypes</a></li>
						<li><a href="product_occurrence.html#externals">3.3 Externals</a></li>
						<li><a href="product_occurrence.html#displayParameters">3.4 Display Parameters</a></li>
						<li><a href="product_occurrence.html#filtersLayers">3.5 Filters and Layers</a></li>
						<li><a href="product_occurrence.html#configurations">3.6 Configurations</a></li>
						<li><a href="persistent_ids.html">3.7 Persistent IDs</a></li>
					</ul>
                    <p class="accordion-toggle">4 Geometry</p>
					<ul>
						<li><a href="reading_geometry.html">4.0 Reading Model Geometry</a></li>
						<li><a href="getting_tessellation.html">4.1 Getting Tessellation</a></li>
						<li><a href="getting_brep.html">4.2 Getting B-rep Data</a></li>
						<li><a href="tessellation_example.html">4.3 Tessellation Example</a></li>
						<li><a href="approx_as_analytic.html">4.4 Display Parameters</a></li>
					</ul>
                    <p class="accordion-toggle">5 Entity Attributes</p>
					<ul>
						<li><a href="colors_materials.html">5.1 Colors and Materials</a></li>
						<li><a href="managing_attribute_inheritance.html">5.2 Managing Attribute Inheritance</a></li>
						<li><a href="transformations.html">5.3 Transformations</a></li>
					</ul>
                    <p><a href="markup.html">6 Markup and Views</a></p>
                    <p class="accordion-toggle">7 Advanced Functions</p>
					<ul>
						<li><a href="advanced.html#computingLengths">7.1 Computing Lengths</a></li>
						<li><a href="advanced.html#physicalProperties">7.2 Getting Physical Properties</a></li>
						<li><a href="advanced.html#modelCompare">7.3 Model Compare</a></li>
						<li><a href="advanced.html#modelSewing">7.4 Model Sewing</a></li>
						<li><a href="advanced.html#computingSections">7.5 Computing Sections</a></li>
						<li><a href="advanced.html#comparingPointClouds">7.6 Model to Point Cloud Comparison</a></li>
						<li><a href="advanced.html#shattered">7.7 Shattered Loading</a></li>
					</ul>
                    <p><a href="hoops_exchange_for_parasolid_developers.html">8 HOOPS Exchange for Parasolid Developers</a></p>
				</div>
			</div>
		<p class="accordion-toggle">API Reference</p>
			<div class="accordion-content api_ref">
				<ul>
					<li><a href="classes.html">Data Structures</a></li>
					<li><a href="f_index.html">Functions</a></li>
					<li><a href="modules.html">Modules</a></li>
					<li><a href="files.html">Files</a></li>
					<li><a href="functions.html">Fields</a></li>
					<li><a href="globals.html">Globals</a></li>
				</ul>
			</div>
    </div>
<div class="footer">
	HOOPS Exchange 2016 SP1 U4&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.techsoft3d.com">www.techsoft3d.com</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://developer.techsoft3d.com">developer.techsoft3d.com</a>
</div>
</body>
</html>